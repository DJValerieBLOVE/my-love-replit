# ğŸ­Â My Masterpiece App â€” Build Spec for Replit

---

## ğŸ“‹ EXECUTIVE SUMMARY

<aside>
ğŸ¯

**What We're Building:** A fun, spiritual, gamified personal growth app where users design their own dashboard, earn Bitcoin for progress, consume courses/podcasts/music in one place, connect with collaborators, journal privately, and get coached by an AI that remembers them forever â€” all powered by a hybrid Nostr + Database architecture with Lightning payments.

</aside>

### One-Liner

> **Notion + Obsidian + Mighty Networks + Spotify + Nostr + Lightning + AI Coach + Pinterest Vision Board = My Masterpiece**
> 

### What Makes This Different

- **NOT** a boring social feed like Circle.so
- **NOT** algorithm-driven â€” YOU control what you see
- **NOT** fully centralized â€” user owns identity and can port it anywhere
- **IS** a creative, beautiful, customizable canvas
- **IS** gamified with REAL Bitcoin rewards
- **IS** privacy-first with Nostr identity + encrypted private data

---

## ğŸ—ï¸ ARCHITECTURE DECISION (January 2026)

<aside>
âš¡

**THE HYBRID APPROACH** â€” Best of both worlds: Nostr for identity/social/zaps + Fast database for private features

</aside>

### Why Hybrid?

| Pure Nostr Problem | Hybrid Solution |
| --- | --- |
| Relay sync = 1-5 second delays | Database queries = instant (milliseconds) |
| Can't store complex private data | PostgreSQL handles goals, journals, AI matching |
| Custom profile fields = public | Private fields stay in YOUR encrypted database |
| Clunky for dashboards | Snappy "Obsidian-like" experience |

### What Goes Where

| Feature | Stored In |
| --- | --- |
| **Identity (nPub/nSec)** | Nostr |
| **Public profile (name, avatar)** | Nostr |
| **Private profile fields** | Your Database |
| **Journals & notes** | Browser + Nostr backup |
| **Social feed & posts** | Nostr relays |
| **Zaps & Lightning** | Nostr (NIP-57) |
| **AI memory** | Browser + Nostr backup |
| **Community membership status** | Your Database |
| **Course progress & gamification** | Your Database |

---

## ğŸ› ï¸ TECH STACK (Updated)

| Layer | Technology | Cost | Notes |
| --- | --- | --- | --- |
| **Platform** | Replit | $25/mo (Pro) | All-in-one: hosting, DB, deployment |
| **Frontend** | React + Tailwind CSS | Included | Responsive PWA |
| **Database** | Replit PostgreSQL | Included (10GB) | Private data, memberships, profiles |
| **Identity** | Nostr (NDK library) | FREE | User owns keys (npub/nsec) |
| **Payments** | Lightning (WebLN/NWC) | FREE | Non-custodial â€” users bring own wallet |
| **Zaps** | Nostr NIP-57 | FREE | Native zaps on posts, profiles, content |
| **AI Memory** | Voy/Orama (browser) | FREE | Local vector store in IndexedDB |
| **AI Backup** | Nostr Encrypted (NIP-44) | FREE | User-owned cloud backup |
| **AI Model** | OpenRouter API | You pay (pennies) | Default: Claude Sonnet 3.5 via your key; Optional BYOK for power users |
| **Mobile** | PWA | FREE | Bypasses App Store â€” no 30% fee |

### Total MVP Cost: ~$25/month

---

## ğŸ“± APP DISTRIBUTION STRATEGY (Confirmed Jan 2026)

<aside>
âœ…

**DECISIONS CONFIRMED:** PWA first â†’ Electron later. Start simple, validate the idea before investing in harder infrastructure.

</aside>

### Build Path

```jsx
Phase 1: PWA (Replit MVP) â†’ Phase 2: Electron Desktop â†’ Phase 3: Mobile Native (iOS/Android)
```

### Phase 1: PWA (Progressive Web App) â€” START HERE

| Benefit | Details |
| --- | --- |
| **Works everywhere** | Browser on phone, tablet, desktop |
| **"Install" to home screen** | Users can add to home screen on iOS/Android |
| **Limited offline** | Cached pages, queued actions |
| **No app store approval** | Deploy instantly, no 30% Apple tax |
| **Replit builds this** | Same codebase, no extra work |
| **Cost** | ~$25/mo (current plan) |

### Phase 2: Electron Desktop App (Post-MVP)

- Wrap the working web app in Electron
- Now it's a **downloadable desktop app** (like Notion, Obsidian, Slack, Discord)
- **Full offline capability** with local SQLite database
- Syncs to Nostr when online
- Users download from your website
- **Same codebase** â€” just wrapped

### Phase 3: Mobile Native (Future)

- React Native or Expo for iOS/Android app stores
- Can share ~80% of code with web version
- Only pursue after MVP validated

### Why This Approach?

> **"If this is a crappy idea, I don't wanna spend a lot of money and time doing the harder stuff."** â€” Valerie, Jan 2026
> 

PWA lets you validate the concept FAST. If it works â†’ invest in desktop/mobile. If it doesn't â†’ pivot without wasted investment.

---

## ğŸ¨ VISUAL DESIGN REFERENCE: EdStr/Shakespeare

<aside>
ğŸ–¼ï¸

**DESIGN INSPIRATION:** The EdStr app built in Shakespeare. See screenshots in conversation for visual reference.

</aside>

### Key Design Elements to Replicate

**Home Dashboard (9-Card Grid "My Masterpiece"):**

- Beautiful photo background cards
- Daily Wins, 11x LOVE, Your Goals, Events, Buddies, Learning, AI Mentor, Streak, Communities
- Each card = clickable widget with photo overlay
- Streak counter with fire emoji ğŸ”¥
- "wins this week" + "X day streak" display
- Cards expand on click for details

**Leaderboard:**

- Podium view (1st, 2nd, 3rd highlighted)
- All Time / Weekly / Monthly tabs
- Points + Badges + Streak columns
- Visual avatar display

**Feed:**

- "Your Feed" with tabs: For You, Wins, Following, Trending, Notifications
- "Share Your Learning Journey" composer box
- Zap button showing sats amount (e.g., "5k sats")
- Hearts, comments, reposts visible
- "Live Now" sidebar with active workshops/events
- "Upcoming Events" sidebar

**Buddy Magic (AI Matching):**

- 3-step visual flow: Complete Profile â†’ AI Analyzes â†’ Connect & Grow
- "Find My Buddies" button
- Clean card-based suggestions

**Communities:**

- Card view with member count + online now indicator
- "Pinned" sidebar for favorites
- Search bar
- My Communities / Suggested / All Communities tabs

**Library:**

- Bookmarks, Projects, Journal tabs
- Clean list view with type tags (article, video, pdf, link)
- Private/Public indicators

### Customization Features (Make It Fun!)

- **Color themes** â€” Light/Dark + custom accent colors
- **Widget backgrounds** â€” Soft gradients, nature images, sacred geometry
- **Animations** â€” Subtle celebrations (confetti, sparkles on wins)
- **Font choices** â€” Clean modern + one sacred/script option
- **Sound design** â€” Optional chimes, gentle pings (you're a DJ!)
- **Card flip animations** â€” For affirmation deck feature

---

## ğŸ“Š SCALABILITY & PORTABILITY

### Scalability Levels Defined

| Level | Users Supported | When to Upgrade |
| --- | --- | --- |
| **MVP (Replit Only)** | 1,000-10,000 | Start here |
| **Growth (Replit + Supabase)** | 10,000-50,000 | When you hit DB limits |
| **Scale (Dedicated Infrastructure)** | 50,000+ | When you're making real money |

### Portability Guarantee

Your code is **fully portable** because:

- âœ… React frontend â†’ Deploy anywhere (Vercel, Netlify, AWS)
- âœ… PostgreSQL â†’ Export SQL dump â†’ Import anywhere
- âœ… Nostr integration â†’ It's a protocol, not tied to any host
- âœ… Lightning/Zaps â†’ User's wallet, not yours
- âœ… Code lives in GitHub â†’ You own everything

**You're NOT locked into Replit.** Start cheap, migrate when needed.

---

## ğŸ’° BUSINESS MODEL & PROFITABILITY (Updated January 2026)

<aside>
ğŸ¯

**CORE PHILOSOPHY:** AI is a utility (pass-through cost), not a profit center. Your profit comes from the platform membership. Transparent, fair pricing.

</aside>

### Pricing Tiers

| Tier | Monthly | Yearly | What's Included | Your Profit |
| --- | --- | --- | --- | --- |
| **Standard (with AI)** | $15/mo | $149/year | Full platform + 500K tokens/month + all features | ~$9/user (at full AI usage) |
| **Token Top-Up** | $5 one-time | â€” | 200K tokens (NEVER expires) | ~$2.50 |
| **BYOK (Bring Your Own Key)** | Taught in-app | â€” | Unlimited AI with their own Anthropic key | $0 AI cost to you |

### Token Transparency (What Users See)

<aside>
ğŸŸï¸

**What's a token?** Tokens are the "fuel" for AI conversations. Roughly 1 token = Â¾ of a word. A typical exchange (your message + AI reply) uses 300-1,000 tokens depending on length.

</aside>

**Verified Anthropic Claude Sonnet 3.5 Pricing (January 2026):**

- Input: $3 per 1 million tokens
- Output: $15 per 1 million tokens

**Your Actual Costs:**

| Token Package | Input Cost (40%) | Output Cost (60%) | Total Cost to You | User Pays | Your Margin |
| --- | --- | --- | --- | --- | --- |
| **200,000 tokens** | $0.24 | $1.80 | **$2.04** | $5 (top-up) | ~$2.50 |
| **500,000 tokens** | $0.60 | $4.50 | **$5.10** | Included in $15/mo | ~$9.90 |

### Token Usage Display (In-App UX)

Show users their usage transparently (like Replit/Cursor):

```
ğŸŸï¸ Tokens this month: 127,340 / 500,000
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 25%
```

**Notification thresholds:**

- At 50%: Subtle indicator in settings
- At 75%: Gentle notification
- At 90%: "You're approaching your monthly limit. Top up for $5, or bring your own API key for unlimited."

### Monthly Reset Policy

- **Included tokens (500K/month):** Reset monthly on billing date. No rollover.
- **Purchased top-ups:** NEVER expire. They paid extra, they keep it.
- **Frame it positively:** "Your tokens refresh monthly â€” a clean slate to explore."

### Unit Economics (Assuming 100% Token Usage)

| Cost Item | Per User/Month |
| --- | --- |
| AI (500K tokens, fully used) | $5.10 |
| Replit hosting (prorated at scale) | ~$0.05-0.25 |
| Stripe fees (2.9% + $0.30) | ~$0.75 |
| **Total cost per user** | **~$5.90-6.10** |
| **Revenue at $15/mo** | **$15.00** |
| **Gross profit per user** | **~$9.00** |

### Revenue Projections

| Users | Monthly Profit | Annual Profit |
| --- | --- | --- |
| 100 | $900 | $10,800 |
| 250 | $2,250 | $27,000 |
| 500 | $4,500 | $54,000 |
| 1,000 | $9,000 | $108,000 |

### The Value for Value Philosophy

<aside>
ğŸ’œ

**CONTENT = Value for Value (FREE with optional zaps)**

**COMMUNITY = Paid Membership**

**AI = Pass-through utility (not a profit center)**

</aside>

| What's FREE (V4V) | What's PAID ($15/mo) |
| --- | --- |
| Courses & lessons | AI Learning Buddy (500K tokens) |
| Podcasts & videos | Community access |
| Blog posts & articles | AI Buddy matching |
| Public content library | Accountability pods |
| Basic canvas/dashboard | Private group chat |
| Journal & tracking (local) | Cloud backup storage |
| â€” | Live events & calls |
| â€” | Premium widgets |

### Free Trial

- **14-day free trial** (forces action vs 30-day laziness)
- Limited to **50K tokens** during trial so they can taste AI
- Full platform features unlocked
- Credit card required to prevent abuse

### Teaching BYOK (Bring Your Own Key)

Most users won't know what an API key is. That's okay â€” start them on Standard tier.

**When someone buys their 3rd top-up, surface a friendly message:**

> "Hey! Looks like you love the AI. ğŸ’œ Want to save money? I can teach you how to get your own API key â€” it takes 5 minutes and gives you unlimited AI at cost. [Learn How]"
> 

This aligns with your values: **start simple, teach independence.**

**Why this works:**

- Content spreads freely â†’ Builds audience
- Community creates value â†’ Worth paying for
- People CAN zap content if they want (V4V)
- But MUST pay for connection & community
- AI costs are transparent and fair

---

## ğŸ” ACCESS CONTROL: How Paid Communities Work

### The Technical Flow

```
1. User logs in with Nostr (nPub)
2. App checks database: "Does this nPub have active membership?"
3. YES â†’ Show community features (pods, matching, chat, events)
4. NO â†’ Show paywall: "Join this community for X sats/month"
5. User pays via Lightning â†’ App records membership in database
6. Access granted immediately
```

### Database Schema for Memberships

```sql
-- Communities table
communities (
  id, 
  creator_npub, 
  name, 
  description, 
  price_sats_monthly,
  price_sats_yearly,
  created_at
)

-- Memberships table  
memberships (
  id,
  user_npub,
  community_id,
  status, -- 'active', 'expired', 'cancelled'
  payment_type, -- 'monthly', 'yearly', 'lifetime'
  expires_at,
  created_at
)

-- Access check: Simple query
SELECT * FROM memberships 
WHERE user_npub = ? AND community_id = ? AND status = 'active'
```

### What Each Access Level Sees

| Feature | FREE User | PAID Member |
| --- | --- | --- |
| View courses (V4V) | âœ… | âœ… |
| Zap content | âœ… | âœ… |
| Personal canvas | âœ… | âœ… |
| Private journal | âœ… | âœ… |
| AI Learning Buddy (basic) | âœ… | âœ… |
| Global Nostr feed (all follows) | âœ… | âœ… |
| 11x LOVE tracking widget | âœ… (free bonus!) | âœ… |
| Basic widgets | âœ… | âœ… |
| Community-specific feeds | âŒ | âœ… |
| Accountability pods | âŒ | âœ… |
| AI Buddy matching | âŒ | âœ… |
| Private group chat | âŒ | âœ… |
| Live events & calls (paid) | âŒ | âœ… |
| Public events (creator's choice) | âœ… (if creator allows) | âœ… |
| Premium widgets | âŒ | âœ… |

### Feed Architecture: Tabbed + Filterable

<aside>
ğŸ“°

**THE GOAL: No giant overwhelming feed.** Users control what they see with tabs and filters.

</aside>

**Feed Tabs (User's Feed Page):**

```jsx
[All Nostr] [11x LOVE LaB] [Marketing Mastermind] [Following] [Wins]
```

| Tab | What It Shows | Who Sees It |
| --- | --- | --- |
| **All Nostr** | User's full Nostr feed (everyone they follow) | Everyone (FREE) |
| **[Community Name]** | Posts ONLY from that community's members | Paid members of that community |
| **Following** | Posts from people user explicitly follows | Everyone (FREE) |
| **Wins** | Celebration posts tagged as wins | Everyone (FREE) |
| **Notifications** | Replies, zaps, mentions | Everyone (FREE) |

**Why This Works:**

- ğŸŒ **Global Nostr feed** = free, connects to the wider Nostr ecosystem
- ğŸ  **Community tabs** = paid, curated content from your paid communities
- ğŸ¯ **No algorithm** = user chooses what tab to view
- ğŸ”‡ **No overwhelm** = switch tabs to focus on what matters

### 11x LOVE Tracking: Free Plugin/Widget

<aside>
ğŸ

**FREE BONUS for everyone!** The 11x LOVE tracking widget is available to ALL users as a gateway to the paid community.

</aside>

**Why give it away free:**

- Users experience the value of tracking their 11 life areas
- Creates habit/stickiness with the app
- Natural upsell: "Want coaching and community around this? Join the LaB!"
- Differentiates your app from others (unique value prop)

**Widget behavior:**

- Can be added to canvas (drag/drop)
- Can be turned ON/OFF in settings
- Works standalone (doesn't require community membership)
- Data stays private (encrypted to user's key)

### Payment Flow (Non-Custodial)

<aside>
âš¡

**You NEVER hold their money.** Lightning payments go directly to the community creator's wallet.

</aside>

**How it works:**

1. Community creator sets their Lightning address in settings
2. User clicks "Join Community" 
3. App generates invoice using creator's Lightning address
4. User pays from THEIR wallet (Alby, Mutiny, etc.)
5. App detects payment confirmation
6. App records membership in database
7. Access unlocked instantly

**You as platform can optionally:**

- Take 0% (pure V4V ethos)
- Take 3-5% platform fee (sustainable business)
- Charge creators a flat monthly SaaS fee instead

---

## ğŸ“ˆ PROFITABILITY PROJECTIONS

### For YOUR 11x LOVE Community

| Scenario | Members | Price | Monthly Revenue | Annual Revenue |
| --- | --- | --- | --- | --- |
| **Early** | 50 | $47/mo | $2,350 | $28,200 |
| **Growing** | 150 | $47/mo | $7,050 | $84,600 |
| **Thriving** | 300 | $47/mo | $14,100 | $169,200 |
| **Goal** | 500 | $47/mo | $23,500 | $282,000 |

**This exceeds your $250K ARR target!** ğŸ¯

### For Platform SaaS Revenue (Other Creators)

| Year | Paying Creators | Avg Price | Monthly | Annual |
| --- | --- | --- | --- | --- |
| Year 1 | 20 | $49/mo | $980 | $11,760 |
| Year 2 | 75 | $69/mo | $5,175 | $62,100 |
| Year 3 | 200 | $79/mo | $15,800 | $189,600 |

### Combined Revenue Potential (Year 3)

- Your 11x LOVE community: ~$170K
- Platform SaaS from other creators: ~$190K
- **Total: ~$360K ARR** ğŸ”¥

---

## ğŸ’œ CORE VALUES

| Value | What It Means |
| --- | --- |
| **Spirituality** | God-centered (flexible for those who want less) |
| **Sovereignty** | User owns identity, data, and money |
| **Creativity** | Your space looks however YOU want |
| **Community** | Find your people, your pod, your collaborators |
| **Connection** | Real relationships, not algorithm-driven |
| **Value for Value** | Content free, community paid, tips welcome |
| **Fun** | Gamified, beautiful, dopamine-friendly |

---

## ğŸ† KEY FEATURES

| Feature | Access |
| --- | --- |
| **Canvas Dashboard** | FREE |
| **Courses & Content** | V4V |
| **Private Journal** | FREE |
| **AI Learning Buddy (Basic)** | FREE |
| **Community Feed** | PAID |
| **Accountability Pods** | PAID |
| **AI Buddy Matching** | PAID |
| **Live Events** | PAID |
| **Premium Widgets** | PAID |

---

## ğŸ¯ TARGET USER

**"Rockin' Rosie"** â€” High-achieving spiritual moms who want:

- Joyful growth without shame or rigid programs
- Community and accountability (PAID)
- Free access to transformational content (V4V)
- Fun, beautiful, customizable experience
- Sovereignty over their data and money

---

## ğŸ” PRIVACY PROMISE

- **Nostr Identity** â€” Your keys, your identity, portable anywhere
- **User-Owned Data** â€” Journals, AI memory encrypted with YOUR keys
- **No Algorithms** â€” YOU control your feed
- **No Ads** â€” Ever
- **Non-Custodial Payments** â€” We never hold your money
- **Private Profile Fields** â€” Stored encrypted, only visible to your community

---

## âš¡ LIGHTNING WALLET INTEGRATION

### How It Works (Like Primal)

1. User has Nostr keypair (nPub/nSec)
2. Lightning address attached to profile (NIP-05 or wallet metadata)
3. User connects their OWN wallet via:
    - **WebLN** (browser extension like Alby)
    - **Nostr Wallet Connect (NWC)** â€” native Nostr wallet linking
4. Zaps use NIP-57 â€” creates invoice tied to recipient's wallet
5. **You never touch their money**

### Wallet Options for Users

| Wallet | Type | Best For |
| --- | --- | --- |
| **Alby** | Browser extension | Desktop users |
| **Mutiny** | Web/mobile | Privacy-focused |
| **Zeus** | Mobile | Power users |
| **Wallet of Satoshi** | Mobile | Beginners |
| **Primal Wallet** | In-app (Primal) | Nostr natives |

### For Community Payments

- Creator sets their Lightning address
- Member pays â†’ goes DIRECTLY to creator
- App records payment confirmation â†’ unlocks access
- **Zero custody, zero liability**

---

## ğŸ§± EVERYTHING IS A PLUGIN

<aside>
ğŸ§±

**Like Lego blocks** â€” users build their own dashboard from optional pieces.

</aside>

**Default ON (FREE):**

- Canvas (required)
- Personal journal
- AI Learning Buddy (basic)
- Course viewing (V4V)

**Default OFF (Opt-in or PAID):**

- Community features (PAID)
- Accountability pods (PAID)
- AI Buddy matching (PAID)
- Gamification/sats rewards
- Leaderboard
- Marketplace
- 11x LOVE tracking

---

## ğŸ‘‹ ONBOARDING WIZARD

**Goal:** Working dashboard in under 2 minutes.

| Step | Screen | Action |
| --- | --- | --- |
| 1 | Welcome | "Welcome to My Masterpiece!" â†’ Get Started |
| 2 | Connect Identity | "Connect with Nostr" OR "Create New Keys" |
| 3 | Set Your Name | Name, optional avatar |
| 5 | Explore Content | Browse free courses (V4V) |
| 6 | Join Community? | Optional: Join paid community for full features |
| 7 | Done! | "Your Masterpiece is ready!" |

**No wallet required to start.** They can add it later.

---

## ğŸ¬ 11 LIFE AREAS (11x LOVE)

**PAID feature for community members:**

1. **God/Spirituality** â€” Daily spiritual practice
2. **Mission/Purpose** â€” Big dreams and calling
3. **Body** â€” Physical health and fitness
4. **Mind** â€” Mental health and learning
5. **Soul** â€” Joy, creativity, expression
6. **Romance** â€” Relationship health
7. **Family** â€” Family connections
8. **Community** â€” Friendships and belonging
9. **Money** â€” Financial goals
10. **Time** â€” Schedule and priorities
11. **Environment** â€” Home and surroundings

### EQ Visualizer (Rainbow Equalizer)

Beautiful 11-bar visual showing balance across all life areas. AI monitors and nudges when areas are neglected.

---

## ğŸ¤– AI LEARNING BUDDY

<aside>
ğŸ”

**PRIVACY-FIRST** â€” User owns all AI data. No central storage. User controls what AI can access.

</aside>

### Architecture

1. **Local Memory** â€” Voy/Orama in browser (IndexedDB)
2. **Cloud Backup** â€” Encrypted via NIP-44 to user's own Nostr relays
3. **Inference** â€” Direct to OpenRouter (user's own API key)
4. **Restoration** â€” On login, fetch encrypted memories â†’ decrypt locally

### How AI Reads Private Data (Technical Flow)

<aside>
ğŸ’¡

**Key Insight:** The AI searches and learns from user data **entirely in the browser**. Your server only stores encrypted blobs it can't read.

</aside>

**Step-by-step:**

1. User opens app â†’ fetches encrypted data from backup (Nostr relays or your DB)
2. Browser decrypts data using user's Nostr key
3. Decrypted data goes into **local vector index** (Voy/Orama in IndexedDB)
4. User asks AI a question
5. AI queries the **local vector index** to find relevant context
6. AI sends query + relevant context to API (Anthropic/OpenRouter)
7. **You never see the decrypted data** â€” it never leaves their browser unencrypted

```jsx
// Flow diagram:
Encrypted Backup (Nostr/Your DB)
        â†“
   User's Browser
        â†“
   Decrypt with nsec
        â†“
   Local Vector Index (Voy/Orama)
        â†“
   AI queries local index
        â†“
   Relevant context + user question â†’ AI API
        â†“
   Response shown to user
```

---

### ğŸ® AI DATA PERMISSIONS (User Controls What AI Can Read)

<aside>
ğŸ”’

**THE GOAL:** Users choose EXACTLY what the AI is allowed to access. Granular control, not all-or-nothing.

</aside>

**Why This Matters:**

- Some users want AI to know everything for maximum personalization
- Others want to keep certain areas private (romance, finances, etc.)
- Trust builds over time â€” let them expand access as they get comfortable

#### AI Permission Settings UI

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI DATA ACCESS SETTINGS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  Choose what your AI Learning Buddy can read to help you:     â”‚
â”‚                                                               â”‚
â”‚  ğŸ““ JOURNAL & NOTES                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â˜‘ï¸ Daily Journal entries                                  â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ 5V's reflections                                       â”‚  â”‚
â”‚  â”‚ â˜ Private notes (keep these to myself)                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ¯ 11x LOVE AREAS                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â˜‘ï¸ God/Spirituality goals & tracking                     â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Mission/Purpose goals & tracking                      â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Body goals & tracking                                 â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Mind goals & tracking                                 â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Soul goals & tracking                                 â”‚  â”‚
â”‚  â”‚ â˜ Romance (keep private)                                 â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Family goals & tracking                               â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Community goals & tracking                            â”‚  â”‚
â”‚  â”‚ â˜ Money (keep private)                                   â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Time goals & tracking                                 â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Environment goals & tracking                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ“š OTHER DATA                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â˜‘ï¸ Course progress & completions                         â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Bookmarked resources                                  â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ Previous AI chat history                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  ğŸ’¡ The more access you give, the more personalized and       â”‚
â”‚     helpful your AI buddy becomes. But YOU control it.        â”‚
â”‚                                                               â”‚
â”‚  ğŸ”’ Remember: Even with access ON, your data stays encrypted  â”‚
â”‚     and private. The AI reads it in your browser only.        â”‚
â”‚                                                               â”‚
â”‚  [Save Settings]                                              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### How Permissions Work Technically

```jsx
// User's AI permissions stored locally
const aiPermissions = {
  journal: {
    dailyJournal: true,
    fiveVs: true,
    privateNotes: false  // User keeps these private
  },
  elevenLove: {
    god: true,
    mission: true,
    body: true,
    mind: true,
    soul: true,
    romance: false,      // User keeps this private
    family: true,
    community: true,
    money: false,        // User keeps this private
    time: true,
    environment: true
  },
  other: {
    courseProgress: true,
    bookmarks: true,
    chatHistory: true
  }
}

// When AI queries for context:
function getAIContext(userQuestion, permissions) {
  const allowedData = []
  
  // Only include data the user has permitted
  if (permissions.journal.dailyJournal) {
    allowedData.push(...searchLocalIndex('journal', userQuestion))
  }
  if (permissions.elevenLove.money) {
    allowedData.push(...searchLocalIndex('money_goals', userQuestion))
  }
  // ... etc for each permission
  
  return allowedData
}
```

#### Default Permissions (New Users)

New users start with **everything ON** for maximum helpfulness, with a clear explanation:

> "ğŸ¤– Your AI buddy can access all your data to give you the best personalized guidance. You can change this anytime in Settings â†’ AI Data Access."
> 

Sensitive areas (Romance, Money) could default to OFF with a prompt:

> "Want your AI to help with Money goals too? [Turn On] [Keep Private]"
> 

---

### Features (Basic = FREE, Advanced = PAID)

| Feature | FREE | PAID |
| --- | --- | --- |
| Chat with AI | âœ… | âœ… |
| AI remembers your goals | âœ… | âœ… |
| Personal context | âœ… | âœ… |
| Buddy matching | âŒ | âœ… |
| 11x LOVE monitoring | âŒ | âœ… |
| Community insights | âŒ | âœ… |

---

## ğŸ“ TERMINOLOGY GLOSSARY

<aside>
âœ…

**USE these terms**

</aside>

| Correct | NOT This |
| --- | --- |
| Widget | Module, block |
| Canvas | Dashboard |
| Masterpiece | Profile, space |
| Big Dream | Goal |
| Sats | Points, coins |
| Zap | Tip, donate |
| Bitcoin | Crypto |
| AI Learning Buddy | Chatbot |
| Membership | Subscription |
| Value for Value | Free |

<aside>
ğŸš«

**NEVER use these terms**

</aside>

- âŒ "Crypto" or "NFT" â€” always say "Bitcoin"
- âŒ "Subscription" â€” say "membership"
- âŒ "Free" for content â€” say "Value for Value"
- âŒ "Failed" â€” say "data point" or "learning"

---

## ğŸš€ BUILD INSTRUCTIONS FOR REPLIT

<aside>
âš ï¸

**CRITICAL: Build chunk by chunk. Test each chunk before moving to the next. Do NOT build everything at once.**

</aside>

### Build Philosophy

1. **Build ONE chunk at a time**
2. **Test it thoroughly** â€” Does it work? Any errors?
3. **Fix any bugs** before moving on
4. **Then and ONLY then** move to the next chunk
5. **Repeat**

### Build Order (Chunks)

| Chunk | What to Build | Test Criteria |
| --- | --- | --- |
| **1** | Basic React app + Tailwind | App loads, styles work |
| **2** | PostgreSQL database setup | Can create/read test data |
| **3** | Nostr login (NDK) | User can login with nPub, see their name |
| **4** | Canvas foundation | Drag/drop grid works, layout saves |
| **5** | Core widgets (journal, tracker) | Widgets render, data persists |
| **6** | Course viewing (V4V) | Can watch/read content |
| **7** | Membership paywall | FREE vs PAID access works correctly |
| **8** | Lightning payments | Can pay to join community |
| **9** | AI Buddy (BYOK) | Chat works with user's API key |
| **10** | Zapping (NIP-57) | Can zap content creators |
| **11** | Pods & matching | PAID feature unlocks correctly |
| **12** | 11x LOVE tracking | PAID feature works |

### After Each Chunk

- [ ]  Does it load without errors?
- [ ]  Does the feature work as expected?
- [ ]  Does it break anything we built before?
- [ ]  Is data persisting correctly?

**Only proceed when ALL boxes are checked.**

---

## ğŸ“¢ NOTIFICATIONS STRATEGY

<aside>
ğŸ””

**How users stay informed without overwhelm.**

</aside>

### MVP (Build First)

- **In-app notifications** â€” Bell icon with unread count
- **Email digests** â€” Optional weekly summary of activity
- **Event reminders** â€” Email 15 min / 1 hour before events (user configurable)

### Post-MVP (Add Later)

- **Push notifications** (PWA supports these!)
- **Real-time toast notifications** for zaps received
- **Digest frequency options** â€” daily, weekly, or off
- **Per-community notification settings**

### What Gets Notified

| Event | In-App | Email | Push (Post-MVP) |
| --- | --- | --- | --- |
| Someone zapped your content | âœ… | âŒ | âœ… |
| New reply to your post | âœ… | âŒ | âœ… |
| Event starting soon | âœ… | âœ… | âœ… |
| Received a traveling badge | âœ… | âœ… | âœ… |
| Pod check-in reminder | âœ… | Optional | âœ… |
| Membership expiring | âœ… | âœ… | âŒ |
| Weekly digest | âŒ | âœ… | âŒ |

---

## ğŸ“¤ DATA EXPORT & PORTABILITY

<aside>
ğŸ”“

**Your data is YOURS.** Users can export everything, anytime.

</aside>

### What Users Can Export

- **Nostr identity** â€” Already portable (npub/nsec work anywhere)
- **Journals & notes** â€” Export as JSON or Markdown
- **Goals & tracking data** â€” Export as JSON or CSV
- **AI memory/context** â€” Export encrypted backup file
- **Course progress** â€” Export completion records
- **Payment history** â€” Export as CSV

### How It Works

1. User goes to Settings â†’ Data & Privacy â†’ Export My Data
2. Selects what to export (all or specific categories)
3. App generates download file(s)
4. User downloads to their device

### Sovereignty Promise

> "Your data lives in YOUR browser and YOUR Nostr relays. We store encrypted blobs we can't read. You can leave anytime and take everything with you. No lock-in, ever."
> 

---

## ğŸ¬ CONTENT HOSTING STRATEGY

<aside>
ğŸ“º

**Where the actual courses, videos, and podcasts live.**

</aside>

### MVP Approach: Embed External Content

| Content Type | Hosted On | How It Works |
| --- | --- | --- |
| **Videos** | YouTube (unlisted) | Embed player in app |
| **Podcasts** | Podhome / Spotify | Embed player in app |
| **PDFs/Downloads** | Google Drive or Replit static | Direct download links |
| **Blog posts** | Wix (canonical) or in-app | Link out or render in app |

**Why this works for MVP:**

- No video hosting costs
- Leverage existing YouTube/Podhome infrastructure
- Fast to implement
- Content already exists on these platforms

### Post-MVP: Self-Hosted Option

- [**Bunny.net](http://Bunny.net) CDN** â€” cheap video hosting (~$0.01/GB)
- **Native video player** â€” better UX, no YouTube branding
- **Offline caching** â€” PWA can cache videos for offline viewing
- **DRM-free philosophy** â€” trust your community, don't lock content

### Content Gating (Reminder)

- V4V content = embeds visible to everyone
- PAID content = embed only loads after membership check
- External links (YouTube) still require login to track progress

---

## ğŸ”’ AI SECURITY: Preventing Abuse (BYOK Model)

<aside>
ğŸ›¡ï¸

**Users bring their OWN API keys. You NEVER store or proxy API keys through your server.**

</aside>

### How BYOK (Bring Your Own Key) Works

```
1. User goes to Settings â†’ AI Provider
2. User enters their OpenRouter API key
3. Key is stored LOCALLY in browser (encrypted in localStorage or IndexedDB)
4. AI calls go DIRECTLY from browser â†’ OpenRouter
5. Your server NEVER sees the key or the chat content
```

### Why This Prevents Hacking/Abuse

| Risk | How BYOK Prevents It |
| --- | --- |
| **Users abusing YOUR API key** | You don't have one â€” they use their own |
| **Huge AI bills** | User pays their own OpenRouter bill |
| **Key theft from your server** | Key never touches your server |
| **Liability for chat content** | Chats go direct to OpenRouter, not through you |
| **Free riders** | Can't use AI without entering their own key |

### Implementation Details

**In Settings UI:**

```
AI Provider Settings
â”œâ”€â”€ [ ] Use default (limited free tier, if you offer one)
â”œâ”€â”€ [x] Bring Your Own Key (recommended)
â”‚       â””â”€â”€ API Key: [sk-or-v1-xxxxx...] (masked input)
â”‚       â””â”€â”€ Test Connection button
â””â”€â”€ Model selector: Claude, GPT-4, Llama, etc.
```

**Key Storage (Client-Side Only):**

```jsx
// Store encrypted in browser
localStorage.setItem('openrouter_key', encryptedKey)

// OR store in IndexedDB for more security
// OR store encrypted in Nostr (NIP-44) for cross-device sync
```

**AI Calls (Direct to OpenRouter):**

```jsx
// This happens IN THE BROWSER, not on your server
const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
  headers: {
    'Authorization': `Bearer ${userApiKey}`, // User's key from localStorage
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ messages, model })
})
```

### Default AI Model: Claude Sonnet 3.5

<aside>
ğŸ¤–

**CONFIRMED (Jan 2026):** Default AI is Claude Sonnet 3.5 via YOUR OpenRouter key. Users get AI for free â€” you pay pennies per message.

</aside>

**How it works:**

- You (Valerie) have an OpenRouter API key stored as an environment variable
- All users get Claude Sonnet 3.5 by default â€” frictionless onboarding
- Cost to you: ~$0.003-0.01 per message (pennies)
- Users don't need to set up anything â€” AI just works

**Optional BYOK for Power Users:**

- In Settings â†’ AI Provider, power users CAN add their own OpenRouter key
- This lets them: use different models (GPT-4, Llama, etc.), get unlimited usage, control their own costs
- Most users will never need this â€” it's for tinkerers

**Why this approach:**

- **Zero friction** â€” AI works on day 1, no setup required
- **Your cost is tiny** â€” even 1,000 users chatting = maybe $50-100/month
- **Power users happy** â€” they can bring their own key if they want
- **No abuse risk** â€” you control the default key, can add rate limits if needed

---

## ğŸ­ AI PERSONALITY CUSTOMIZATION

<aside>
ğŸ­

**THE GOAL: Users BUILD THEIR OWN AI personality.** They name it, describe how it talks, and make it theirs. Fully customizable from day one.

</aside>

### Why User-Built Personalities

- **No one-size-fits-all** â€” Your Magic Mamas are unique individuals
- **Personal connection** â€” Naming your AI buddy creates attachment
- **Creative expression** â€” Let them describe exactly what they want
- **Mix and match** â€” "Jesus meets Buddha meets Einstein meets Jim Morrison" â€” why not?!

### What Users Define

| Field | What It Is | Example |
| --- | --- | --- |
| **Name** | What they call their AI buddy | "Luna", "Grace", "Spark", "Coach" |
| **Tone Description** | Free-text describing how they want their buddy to talk | "Speak to me like a wise grandmother who's read all the philosophy books and has a great sense of humor. Gentle but honest." |
| **Vibe Traits** (optional) | Checkboxes for common traits they can mix-and-match | â˜‘ï¸ Warm & nurturing â˜‘ï¸ Direct & honest â˜‘ï¸ Playful & funny |

### Vibe Traits Checklist (Optional Mix-and-Match)

Users can check any combination:

- â˜ Warm & nurturing
- â˜ Direct & honest
- â˜ Playful & funny
- â˜ Spiritual / faith-based
- â˜ Analytical & strategic
- â˜ High energy & motivating
- â˜ Calm & grounding
- â˜ Poetic & philosophical
- â˜ Witty & sarcastic
- â˜ Encouraging & celebratory

### How It Works (Technical)

The user's name + description + checked traits get combined into a system prompt:

```jsx
// User's settings:
const buddyName = "Luna"
const toneDescription = "Speak to me like a wise grandmother who's read all the philosophy books and has a great sense of humor. Gentle but honest."
const vibeTraits = ["warm_nurturing", "direct_honest", "playful_funny"]

// System prompt builder:
function buildPersonalityPrompt(name, description, traits) {
  const traitDescriptions = {
    warm_nurturing: "Be warm, supportive, and nurturing in your responses.",
    direct_honest: "Be direct and honest, don't sugarcoat things.",
    playful_funny: "Use humor and playfulness, keep things light when appropriate.",
    spiritual: "Incorporate spiritual wisdom and faith-based encouragement.",
    analytical: "Be analytical and structured in your thinking.",
    high_energy: "Be enthusiastic and high-energy, use exclamation points!",
    calm_grounding: "Be calm, measured, and grounding.",
    poetic: "Use poetic language and philosophical insights.",
    witty: "Be witty and occasionally sarcastic (but kind).",
    encouraging: "Celebrate wins big and small, be a cheerleader."
  }
  
  const traitInstructions = traits.map(t => traitDescriptions[t]).join(" ")
  
  return `Your name is ${name}. ${description} ${traitInstructions}`
}

// Result for Luna:
// "Your name is Luna. Speak to me like a wise grandmother who's read all 
//  the philosophy books and has a great sense of humor. Gentle but honest. 
//  Be warm, supportive, and nurturing in your responses. Be direct and 
//  honest, don't sugarcoat things. Use humor and playfulness, keep things 
//  light when appropriate."
```

### User Settings UI

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ­ CREATE YOUR AI BUDDY                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  What do you want to name your AI buddy?                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Luna                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  How do you want your buddy to talk to you?                  â”‚
â”‚  (Describe the vibe, tone, and style you want)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Speak to me like a wise grandmother who's read all the  â”‚  â”‚
â”‚  â”‚ philosophy books and has a great sense of humor.        â”‚  â”‚
â”‚  â”‚ Gentle but honest. Mix Jesus, Buddha, and Einstein.     â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  ğŸ’¡ Examples: "Talk to me like my favorite coach",            â”‚
â”‚     "Be playful like a best friend", "Wise and poetic",      â”‚
â”‚     "Jesus meets Buddha meets Elon Musk"                      â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                               â”‚
â”‚  Optional: Add some vibe traits (check all that apply)        â”‚
â”‚                                                               â”‚
â”‚  â˜‘ï¸ Warm & nurturing      â˜‘ï¸ Direct & honest                  â”‚
â”‚  â˜‘ï¸ Playful & funny       â˜ Spiritual / faith-based           â”‚
â”‚  â˜ Analytical & strategic â˜ High energy & motivating          â”‚
â”‚  â˜ Calm & grounding       â˜ Poetic & philosophical            â”‚
â”‚  â˜ Witty & sarcastic      â˜ Encouraging & celebratory         â”‚
â”‚                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                               â”‚
â”‚  [Preview Luna's Voice]   [Save]                              â”‚
â”‚                                                               â”‚
â”‚  ğŸ’œ You can change this anytime. Your buddy remembers         â”‚
â”‚     everything â€” only the voice changes!                      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Preview Feature

When user clicks "Preview" they see a sample response:

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PREVIEW: How Luna will respond                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  You: "I'm feeling stuck on my goals today."                â”‚
â”‚                                                             â”‚
â”‚  Luna: "Ah, sweet one. Being stuck is just the pause        â”‚
â”‚  before the leap â€” even Aristotle needed naps between       â”‚
â”‚  brilliant thoughts! ğŸ˜„ Now, let's be real: what's the      â”‚
â”‚  smallest, silliest step you could take right now?          â”‚
â”‚  Sometimes wisdom is just doing the next tiny thing."       â”‚
â”‚                                                             â”‚
â”‚  [Looks good!]   [Try different settings]                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database Schema

```sql
user_ai_personality (
  user_npub TEXT PRIMARY KEY,
  buddy_name TEXT DEFAULT 'Buddy',
  tone_description TEXT,           -- Free-text description
  vibe_traits TEXT[],              -- Array of checked traits
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

### Default for New Users

If user doesn't customize, they get:

- **Name:** "Buddy"
- **Tone:** "Warm, encouraging, and helpful. Celebrates your wins and gently nudges you forward."
- **Traits:** warm_nurturing, encouraging

This gives a good experience out of the box while encouraging customization.

---

## ğŸ¤– AI PROVIDER OPTIONS: Complete Guide

<aside>
ğŸ’¡

**THE GOAL: Make AI "just work" for 99% of users, while giving power users the option to bring their own key.** This section explains ALL the options and why we chose what we chose.

</aside>

### The Two-Tier Approach

| Tier | Who It's For | How It Works | Cost to User |
| --- | --- | --- | --- |
| **Tier 1: Default (Valerie's Key)** | 99% of users â€” everyone who just wants it to work | Claude Sonnet 3.5 via YOUR OpenRouter key, built into the app | FREE (you pay ~$0.003-0.01/message) |
| **Tier 2: BYOK (Bring Your Own Key)** | Power users, heavy users, tinkerers | User adds their own OpenRouter key in Settings | User pays their own OpenRouter bill |

### Why OpenRouter as the Hub?

<aside>
ğŸ”‘

**OpenRouter is like a "universal adapter" for AI.** One API, access to 100+ models. Users don't need accounts with 5 different AI companies.

</aside>

**What OpenRouter provides:**

- **One API key** â†’ access to Claude, GPT-4, Llama, Mistral, Gemini, and 100+ more
- **Pay-as-you-go** â†’ no subscriptions, just pay for what you use
- **Easy switching** â†’ change models without changing code
- **Transparent pricing** â†’ see cost per token for each model
- **Free tier** â†’ some models have free usage limits

**Cost examples (via OpenRouter, Jan 2026):**

| Model | Cost per 1K tokens (input) | Cost per 1K tokens (output) | Typical message cost |
| --- | --- | --- | --- |
| **Claude Sonnet 3.5** (default) | $0.003 | $0.015 | ~$0.003-0.01 |
| **GPT-4o** | $0.005 | $0.015 | ~$0.005-0.02 |
| **Llama 3.1 70B** | $0.0008 | $0.0008 | ~$0.001-0.003 |
| **Mistral Large** | $0.003 | $0.009 | ~$0.003-0.01 |
| **Gemini Pro** | $0.00025 | $0.0005 | ~$0.001 |

### What Power Users Can Do with BYOK

When a user adds their own OpenRouter key:

1. **Choose different models** â€” Maybe they prefer GPT-4 or want to try Llama
2. **Unlimited usage** â€” No rate limits from your key
3. **Pay their own way** â€” Heavy users cover their own costs
4. **Experiment** â€” Try new models as they're released

### Settings UI for AI Provider

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI PROVIDER SETTINGS                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â—‹ Use Default AI (Recommended)                          â”‚  â”‚
â”‚  â”‚   Claude Sonnet 3.5 â€” FREE, no setup needed             â”‚  â”‚
â”‚  â”‚   âœ“ SELECTED                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â—‹ Bring Your Own Key (Power Users)                      â”‚  â”‚
â”‚  â”‚   Use your own OpenRouter API key for unlimited access  â”‚  â”‚
â”‚  â”‚   and model choice. You pay your own usage.             â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚   OpenRouter Key: [sk-or-v1-xxxxx...]  [Test Connection] â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚   Model: [Claude Sonnet 3.5 â–¼]                          â”‚  â”‚
â”‚  â”‚          â”œâ”€â”€ Claude Sonnet 3.5 (recommended)            â”‚  â”‚
â”‚  â”‚          â”œâ”€â”€ Claude Opus (most capable)                 â”‚  â”‚
â”‚  â”‚          â”œâ”€â”€ GPT-4o                                     â”‚  â”‚
â”‚  â”‚          â”œâ”€â”€ Llama 3.1 70B (cheapest)                   â”‚  â”‚
â”‚  â”‚          â”œâ”€â”€ Mistral Large                              â”‚  â”‚
â”‚  â”‚          â””â”€â”€ Gemini Pro                                 â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚   [Get an OpenRouter key â†’]                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ’¡ Most users never need to change this. The default AI     â”‚
â”‚     is fast, smart, and free!                                â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Why NOT These Other Options

| Option | Why We're NOT Using It |
| --- | --- |
| **Direct OpenAI/Anthropic accounts** | Users would need separate accounts with each company. OpenRouter bundles them all. |
| **Ollama (local AI)** | Requires users to install software on their computer, download large model files (4-70GB), and have a powerful machine. Great for developers, NOT for your Magic Mamas audience. |
| **Self-hosted AI server** | Expensive ($100s-1000s/month for GPU servers), complex to maintain, and you'd be liable for all usage. OpenRouter handles all of this. |
| **ChatGPT Plus subscription** | $20/month per user, can't integrate into your app (it's a separate website). |

### Rate Limiting (Protecting Your Key)

Since you're paying for the default AI, add reasonable limits:

- **Per-user daily limit:** 50-100 messages/day (generous for normal use)
- **Per-message length limit:** 4,000 characters input
- **Cooldown:** 2 seconds between messages (prevents spam)
- **Abuse detection:** Flag accounts sending 100+ messages/hour

```jsx
// Simple rate limiting
const DAILY_LIMIT = 100;
const userMessagesToday = await getMessageCount(user.npub, 'today');

if (userMessagesToday >= DAILY_LIMIT) {
  return "You've reached your daily AI limit! ğŸ’œ 
    Want unlimited? Add your own OpenRouter key in Settings.";
}
```

### Cost Projections for You (Valerie)

| Active Users | Messages/Day (avg 10) | Monthly Cost (Claude Sonnet) |
| --- | --- | --- |
| 100 users | 1,000/day | ~$9-30/month |
| 500 users | 5,000/day | ~$45-150/month |
| 1,000 users | 10,000/day | ~$90-300/month |
| 5,000 users | 50,000/day | ~$450-1,500/month |

**At scale, AI cost is ~$0.30-1.50 per user per month** â€” easily covered by membership fees.

### Implementation Summary

1. **MVP:** Your OpenRouter key as environment variable, Claude Sonnet 3.5 default, 100 msg/day limit
2. **Post-MVP:** Add BYOK option in Settings for power users
3. **Future:** Model selector for BYOK users, usage dashboard showing their costs

### User Experience

**First time using AI:**

> "To chat with your AI Learning Buddy, you'll need an OpenRouter API key. It's like buying your own AI tokens â€” you pay for what you use, and we never see your conversations. [Get a key here](https://openrouter.ai)"
> 

**Cost for users:**

- OpenRouter is cheap: ~$0.001-0.01 per message depending on model
- Average user might spend $1-5/month on AI
- Power users can spend more, their choice

---

## ğŸš€ BUILD PRIORITY (MVP)

1. **Canvas foundation** â€” drag/drop grid, save layout
2. **Nostr auth** â€” login with nPub
3. **Database setup** â€” PostgreSQL for private data
4. **Core widgets** â€” journal, affirmation, tracker
5. **Course viewing** â€” V4V content player
6. **Community paywall** â€” membership check + Lightning payment
7. **AI Buddy (BYOK)** â€” chat with memory, user's own API key
8. **Zapping** â€” NIP-57 integration
9. **Pods & matching** â€” paid feature
10. **11x LOVE tracking** â€” paid feature

---

## âœ… SUCCESS CRITERIA

- [ ]  User can login with Nostr
- [ ]  User can customize their canvas
- [ ]  User can view courses for free (V4V)
- [ ]  User can zap content creators
- [ ]  User can pay to join a community
- [ ]  Paid members see community features
- [ ]  Free users see paywall for community
- [ ]  AI remembers user across sessions
- [ ]  Payments go directly to creator's wallet
- [ ]  Works as PWA on mobile

---

## ğŸ“Š COSTS SUMMARY

| Item | Monthly Cost |
| --- | --- |
| Replit Pro | $25 |
| Domain | ~$1 |
| **Total** | **~$26/month** |

Everything else (Nostr, Lightning, AI inference) is either free or user-paid.

---

---

## ğŸ” USER DATA PRIVACY & ENCRYPTION (CRITICAL)

<aside>
ğŸ›¡ï¸

**THE GOAL: Even Valerie (the app owner) cannot read users' private data.** Not their journals. Not their dreams. Not their goals. NOBODY but the user can see their stuff.

</aside>

### Why This Matters

Your users are sharing their deepest, most vulnerable thoughts:

- Recovery journeys and sobriety reflections
- Dreams and fears they've never told anyone
- Financial goals and money struggles
- Relationship issues and family challenges
- Spiritual experiences and doubts

**They need to TRUST that this is truly private.** And "trust me, I won't look" isn't good enough. The architecture itself must make snooping *impossible*.

### The Privacy Architecture: 3 Layers

| Layer | What It Protects | How It Works | Who Can See It |
| --- | --- | --- | --- |
| **Layer 1: Client-Side Encryption** | Journals, goals, dreams, private notes | Encrypted IN THE BROWSER before it ever leaves their device | ONLY the user (with their Nostr key) |
| **Layer 2: Nostr Key Ownership** | Identity, encrypted backups | User's private key (nsec) never touches your server | ONLY the user |
| **Layer 3: Zero-Knowledge Database** | Any data that must be stored server-side | Stored as encrypted blobs you CAN'T decrypt | ONLY the user |

### How Client-Side Encryption Works (Simple Explanation)

<aside>
ğŸ’¡

**Think of it like a diary with a lock that only the owner has the key to.** You (Valerie) can see that a locked diary exists in your database, but you can NEVER open it or read what's inside.

</aside>

**Step by step:**

1. **User writes a journal entry** in the app
2. **BEFORE it's saved anywhere**, the app encrypts it using the user's Nostr private key (nsec)
3. **The encrypted blob** (looks like random gibberish) is saved to:
    - Their browser's local storage (IndexedDB)
    - Optionally backed up to Nostr relays (encrypted with NIP-44)
    - Optionally synced to your database (but still encrypted â€” you see gibberish)
4. **When the user opens the app again**, their key decrypts the gibberish back into readable text
5. **You never see the readable version** â€” only the encrypted blob

### What You (Admin) CAN vs CANNOT See

| Data Type | Can Valerie See It? | Why |
| --- | --- | --- |
| User's name/avatar | âœ… Yes | Public profile info (from Nostr) |
| Membership status | âœ… Yes | Needed to run the business |
| Payment history | âœ… Yes | Needed for support/refunds |
| Which courses they've accessed | âœ… Yes (optional) | Analytics (can be turned off) |
| Journal entries | âŒ NO | Client-side encrypted |
| Goals and dreams | âŒ NO | Client-side encrypted |
| Private notes | âŒ NO | Client-side encrypted |
| AI chat history | âŒ NO | Stored locally + encrypted backup |
| 11x LOVE tracking data | âŒ NO | Client-side encrypted |

### The Technical Implementation

**Encryption Standard:** NIP-44 (Nostr's encryption standard)

- Uses the user's Nostr keypair
- Military-grade encryption (XChaCha20-Poly1305)
- Even if your database was hacked, attackers get useless gibberish

**Code Example (What Replit Builds):**

```jsx
// ENCRYPTING (before saving)
import { nip44 } from 'nostr-tools'

const journalEntry = "Today I'm struggling with..." // User's private thought
const userPrivateKey = getUserNsec() // From their Nostr login
const userPublicKey = getUserNpub()

// Encrypt to self (only this user can decrypt)
const encryptedEntry = nip44.encrypt(journalEntry, userPrivateKey, userPublicKey)
// Result: "AgXKj8mF3kL9..." (random-looking gibberish)

// Save the gibberish to database
await saveToDatabase({ 
  userId: userPublicKey, 
  data: encryptedEntry  // <-- You see THIS, not the journal
})

// DECRYPTING (when user opens app)
const decrypted = nip44.decrypt(encryptedEntry, userPrivateKey, userPublicKey)
// Result: "Today I'm struggling with..." (only visible to user)
```

### Where Private Data Lives

| Storage Location | What's There | Encrypted? | Who Controls It |
| --- | --- | --- | --- |
| **Browser (IndexedDB)** | Journals, goals, AI memory | âœ… Yes | User's device |
| **Nostr Relays (NIP-44)** | Encrypted backup of private data | âœ… Yes | User (portable anywhere) |
| **Your PostgreSQL** | Membership status, encrypted blobs | âœ… Private data = encrypted | You (but can't read private stuff) |

---

### ğŸ’¾ MANDATORY REDUNDANT STORAGE (Never Lose Data)

<aside>
âš ï¸

**CRITICAL: Users must NEVER lose their data.** Browser storage can be cleared. Phones get lost. Browsers crash. Build redundancy into the architecture from day one.

</aside>

#### The "Engine Not Vault" Philosophy

This app is an **engine for transformation**, not a media vault:

- **Text data** (journals, goals, notes, AI memory) = small (~1-2MB/year per user) â†’ We store this
- **Videos** = huge â†’ Host on YouTube (unlisted), embed in app
- **Images** = medium â†’ Host on Blossom (Nostr image hosting) or link externally
- **Courses** = embed from external sources (YouTube, Wix, etc.)

**Result:** Your actual storage per user is tiny. Redundancy is cheap.

#### The Three-Layer Backup System

| Layer | Where | When | Purpose |
| --- | --- | --- | --- |
| **1. Browser (Primary)** | IndexedDB in user's browser | Real-time (every save) | Fast access, works offline |
| **2. Nostr Relays (Automatic)** | User's chosen Nostr relays | Every 5 minutes + on close | Cross-device sync, user-owned |
| **3. Your Database (Fallback)** | Replit PostgreSQL | Daily snapshot + on major changes | Disaster recovery (encrypted blobs) |

#### How It Works

```jsx
// Every time user saves ANYTHING:
async function saveWithRedundancy(data, type) {
  const encrypted = encrypt(data, user.nsec)
  
  // Layer 1: Browser (instant)
  await saveToIndexedDB(type, encrypted)
  
  // Layer 2: Nostr (background, every 5 min or on close)
  queueForNostrSync(type, encrypted)
  
  // Layer 3: Your DB (daily snapshot)
  queueForDailyBackup(type, encrypted)
}

// On app load:
async function restoreUserData() {
  // Try browser first (fastest)
  let data = await loadFromIndexedDB()
  
  if (!data || data.corrupted) {
    // Fall back to Nostr
    data = await loadFromNostrRelays(user.npub)
  }
  
  if (!data) {
    // Last resort: your database
    data = await loadFromYourDatabase(user.npub)
  }
  
  return decrypt(data, user.nsec)
}
```

#### User-Facing Backup Status

Show users their backup health in Settings:

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¾ DATA BACKUP STATUS                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸŸ¢ Browser Storage: 847 KB â€” Last saved: Just now           â”‚
â”‚  ğŸŸ¢ Nostr Backup: Synced â€” Last sync: 3 minutes ago          â”‚
â”‚  ğŸŸ¢ Cloud Backup: Healthy â€” Last snapshot: Today 2:00am      â”‚
â”‚                                                               â”‚
â”‚  âœ… Your data is backed up in 3 places. You're protected!     â”‚
â”‚                                                               â”‚
â”‚  [Force Sync Now]  [Export All Data]  [Backup Settings]      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### What Gets Backed Up

| Data Type | Browser | Nostr | Your DB | Size Estimate |
| --- | --- | --- | --- | --- |
| Journal entries | âœ… | âœ… | âœ… | ~500KB/year |
| 11x LOVE goals & tracking | âœ… | âœ… | âœ… | ~100KB/year |
| AI memory/context | âœ… | âœ… | âœ… | ~200KB/year |
| AI chat history | âœ… | âœ… | âœ… | ~300KB/year |
| Canvas layout | âœ… | âœ… | âœ… | ~10KB |
| Settings & preferences | âœ… | âœ… | âœ… | ~5KB |
| Course progress | âœ… | âœ… | âœ… | ~20KB/year |
| **Total per user** |  |  |  | **~1-2MB/year** |

#### Disaster Recovery Scenarios

| Scenario | What Happens | Data Lost? |  |
| --- | --- | --- | --- |
| **User clears browser cache** | App detects empty IndexedDB â†’ restores from Nostr | âŒ No |  |
| **User gets new phone** | Login with Nostr key â†’ data restores automatically | âŒ No |  |
| **Nostr relays go down** | Browser has local copy + your DB has backup | âŒ No |  |
| **Your database crashes** | Browser + Nostr still have data | âŒ No |  |
| **User loses Nostr key** | âš ï¸ Data is encrypted â€” cannot be recovered | âœ… YES (by design) |  |

#### Key Loss Prevention

Since losing the Nostr key = losing everything, build these safeguards:

1. **Onboarding warning:** "Your secret key is like your house key. If you lose it, we CANNOT recover your data. Write it down!"
2. **Key backup prompt:** Show nsec once, make them confirm they saved it
3. **Optional: Key export file:** Let users download their nsec as an encrypted file
4. **Multi-device login:** If they're logged in on phone AND laptop, losing one device doesn't lose their key
5. **Periodic reminders:** "Have you backed up your secret key lately? [Show Key] [I've got it]"

### What If a User Loses Their Key?

<aside>
âš ï¸

**Important tradeoff:** True privacy means YOU can't recover their data either. This is a feature, not a bug.

</aside>

**The reality:**

- If user loses their Nostr private key (nsec) â†’ their encrypted data is GONE forever
- You cannot help them recover it (by design)
- This is the same as losing a password to an encrypted vault

**Mitigations to build:**

1. **Strong onboarding warnings:** "Save your secret key! We cannot recover your data if you lose it."
2. **Key backup prompts:** "Write this down and store it somewhere safe"
3. **Optional key export:** Let users download their nsec as a file
4. **Multi-device sync via Nostr:** If they're logged in on phone AND laptop, they have redundancy

### Privacy Promise You Can Make to Users

> "ğŸ”’ **Your private data is YOUR data.**
> 

> 
> 

> Your journals, goals, dreams, and personal reflections are encrypted with YOUR key before they ever leave your device. Not even we can read them. If you lose your key, we cannot recover your data â€” that's how private it is.
> 

> 
> 

> We can see that you're a member and that you've accessed courses, but we will NEVER see your private thoughts. That's a promise built into the code, not just a policy."
> 

### Summary: The Privacy Stack

1. âœ… **Nostr identity** â€” User owns their keys, portable anywhere
2. âœ… **Client-side encryption** â€” Data encrypted before leaving device
3. âœ… **NIP-44 standard** â€” Military-grade, Nostr-native encryption
4. âœ… **Local-first storage** â€” Browser holds data, server is just backup
5. âœ… **Zero-knowledge database** â€” You store encrypted blobs you can't read
6. âœ… **Non-custodial AI** â€” BYOK means you never see their AI chats
7. âœ… **Non-custodial payments** â€” You never hold their money

**This is the gold standard for privacy.** Very few apps offer this level of protection. It's a genuine differentiator for your community.

---

## ğŸ¤ SELECTIVE SHARING & PERMISSIONS (Buddy/Coach Access)

<aside>
ğŸ”“

**THE GOAL: Users control EXACTLY what they share, with WHOM, and for HOW LONG.** Private by default, selectively shareable when they choose.

</aside>

### The Problem We're Solving

Users will create rich 11x LOVE profiles with:

- Goals across all 11 life areas
- Journal entries and reflections
- Progress tracking data
- Dreams and intentions
- Personal struggles and wins

**They need to share SOME of this** with:

- An accountability buddy (maybe just goals + progress)
- A coach (maybe everything, or maybe just certain areas)
- A mastermind group (maybe just business goals)
- A collaboration partner (maybe just relevant project info)

**But they should NEVER have to:**

- Retype information they've already entered
- Share MORE than they want to
- Lose control of who sees what
- Wonder if their data is being shared without permission

### The Solution: Permission Layers

| Layer | Who Sees It | Example Content |
| --- | --- | --- |
| **ğŸ”’ Private (Default)** | ONLY the user | All journals, goals, tracking â€” everything starts here |
| **ğŸ‘¥ Shared with Specific People** | User + selected individuals | "Share my Money goals with my coach Sarah" |
| **ğŸ‘« Shared with My Pod/Group** | User + their accountability pod | "Share my weekly check-ins with my pod" |
| **ğŸŒ Community Visible** | All community members | "Show my public wins on the community feed" |

### How Selective Sharing Works (Simple Explanation)

<aside>
ğŸ’¡

**Think of it like sharing a Google Doc.** You can share the whole doc, or just certain sections. You can give someone "view only" or "edit" access. You can revoke access anytime. Same concept, but with encryption.

</aside>

**The User Experience:**

1. **User fills out their 11x LOVE Code** â€” all data is encrypted and private by default
2. **User wants to share with their coach** â€” they go to Sharing Settings
3. **User selects WHAT to share:**
    - âœ… Share my God/Spirituality goals
    - âœ… Share my Mission/Purpose goals
    - âœ… Share my Money goals
    - âŒ Keep my Romance area private
    - âŒ Keep my journal entries private
4. **User selects WHO to share with:**
    - Search for coach by name or nPub
    - Or select from their connections
5. **User selects HOW LONG:**
    - Indefinitely (until I revoke)
    - For 90 days (auto-expires)
    - For this session only
6. **User confirms** â€” the app re-encrypts ONLY the selected data with a key the coach can access
7. **Coach can now see** those specific areas â€” nothing else

### The Technical Magic (What Replit Builds)

**How selective sharing works with encryption:**

```jsx
// USER'S PERSPECTIVE: Sharing specific goals with coach

// 1. User selects what to share
const dataToShare = {
  areas: ['God/Spirituality', 'Mission/Purpose', 'Money'],
  includeJournals: false,
  includeTracking: true
}

// 2. User selects who to share with
const recipientNpub = 'npub1coach123...' // Coach's public key

// 3. User sets expiration (optional)
const expiresAt = '2026-04-23' // 90 days from now

// 4. App creates a "sharing grant"
const sharingGrant = {
  id: generateUniqueId(),
  grantorNpub: userNpub,        // Who's sharing
  recipientNpub: recipientNpub,  // Who receives access
  dataScope: dataToShare,        // What's being shared
  expiresAt: expiresAt,          // When access ends
  createdAt: now()
}

// 5. App re-encrypts ONLY the selected data with recipient's key
// This uses NIP-44 encryption to the recipient
const sharedData = nip44.encrypt(
  JSON.stringify(selectedGoalsOnly),
  userPrivateKey,
  recipientNpub  // <-- Encrypted TO the coach
)

// 6. Save the grant + encrypted shared data
await saveToDatabase({ grant: sharingGrant, encryptedData: sharedData })

// COACH'S PERSPECTIVE: Viewing shared data
// Coach logs in with their Nostr key
// App checks: "Do any sharing grants exist for this nPub?"
// If yes: decrypt and show ONLY the shared portions
// Coach sees: Goals for 3 areas + tracking
// Coach CANNOT see: Journals, Romance area, other private data
```

### Sharing Controls UI (What Users See)

**In the user's Settings â†’ Sharing & Privacy:**

```
ğŸ”’ MY SHARING SETTINGS

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‘¤ PEOPLE I'M SHARING WITH:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘©â€ğŸ« Sarah (My Coach)                        â”‚
â”‚ Sharing: God, Mission, Money, Body, Mind   â”‚
â”‚ Includes: Goals + Progress Tracking        â”‚
â”‚ Expires: Never (until I revoke)            â”‚
â”‚ [âœï¸ Edit] [Revoke Access]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘« My Accountability Pod (5 members)        â”‚
â”‚ Sharing: Weekly check-ins only             â”‚
â”‚ Includes: Progress scores (not journals)   â”‚
â”‚ Expires: When I leave the pod              â”‚
â”‚ [âœï¸ Edit] [Leave Pod]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[+ Share with Someone New]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” WHO CAN FIND ME FOR MATCHING:

(These preferences help the AI match you with buddies)

âœ… Show that I'm looking for an accountability buddy
âœ… Show my general focus areas (not specific goals)
âŒ Show my specific goals (keep private until I share)
âœ… Show my preferred meeting times
âœ… Show my sobriety journey stage (optional badge)
```

### Buddy Matching: Privacy-Preserving Discovery

<aside>
ğŸ¤

**The challenge:** How do you match people with compatible goals WITHOUT exposing everyone's private data?

</aside>

**Solution: Fuzzy Matching with Minimal Exposure**

1. **User opts into matching** and chooses what's visible for discovery:
    - "I'm working on: Sobriety, Finances, Spirituality" (general categories, not specifics)
    - "Looking for: Weekly check-in buddy"
    - "Availability: Mornings, weekends"
2. **AI suggests matches** based on these general preferences
    - "Sarah is also focused on Sobriety + Finances and wants a weekly buddy!"
3. **BEFORE they connect**, neither sees the other's private details
4. **When they agree to connect**, they each choose what to share:
    - "Share my Sobriety goals with Sarah" â†’ Now Sarah sees those specifics
    - Sarah shares her goals back â†’ Now user sees Sarah's specifics
5. **They can adjust sharing anytime:**
    - Add more areas as trust builds
    - Remove access if the relationship ends
    - Set time limits ("share for our 90-day challenge only")

### Data Sharing Scenarios

| Scenario | What They Share | With Whom | Duration |
| --- | --- | --- | --- |
| **Accountability Buddy** | 2-3 focus areas + weekly progress | One person | Until revoked |
| **VIP Coaching Client** | Full 11x LOVE Code + journals | Their coach (you!) | Duration of coaching |
| **Mastermind Group** | Business goals + wins only | Group (5-10 people) | Membership duration |
| **90-Day Challenge** | Challenge-specific goals + tracking | Challenge cohort | 90 days (auto-expires) |
| **Public Wins** | Celebration posts only | Whole community | Permanent (user controls) |

### What You (Valerie/Admin) CAN See for Coaching

<aside>
ğŸ‘‘

**Important:** Even as the app owner, you only see what users explicitly share WITH YOU. Your VIP coaching clients would grant you access.

</aside>

**If someone signs up for VIP 1:1 Coaching:**

1. They join as a paid member (you see: membership status, payment)
2. They grant YOU (your nPub) access to their full 11x LOVE Code
3. NOW you can see their goals, journals, progress â€” because they CHOSE to share
4. If coaching ends and they revoke access, you can no longer see their data

**This protects everyone:**

- Clients know their data is private until THEY share it
- You get full visibility for clients who WANT you to see
- There's a clear, auditable record of who shared what with whom

### Revoking Access

**Users can revoke access anytime:**

- One click: "Revoke Sarah's access"
- The shared encryption key is invalidated
- Sarah's app can no longer decrypt that data
- Instant, no explanation needed

**Automatic expiration:**

- User sets "Share for 90 days"
- After 90 days, access automatically ends
- User gets a notification: "Your sharing with Sarah has expired. Renew?"

### Database Schema for Sharing Grants

```sql
-- Sharing grants table
sharing_grants (
  id TEXT PRIMARY KEY,
  grantor_npub TEXT,           -- Who is sharing
  recipient_npub TEXT,         -- Who receives access (can be individual or group)
  recipient_type TEXT,         -- 'individual', 'pod', 'group', 'community'
  data_scope JSONB,            -- What's being shared (areas, journals, tracking, etc.)
  encrypted_data TEXT,         -- The actual shared data, encrypted to recipient
  created_at TIMESTAMP,
  expires_at TIMESTAMP,        -- NULL = never expires
  revoked_at TIMESTAMP,        -- NULL = still active
  revoked_reason TEXT          -- Optional: why access was revoked
)

-- Index for fast lookups
CREATE INDEX idx_grants_recipient ON sharing_grants(recipient_npub) WHERE revoked_at IS NULL;
CREATE INDEX idx_grants_grantor ON sharing_grants(grantor_npub);
```

### Summary: The Sharing Philosophy

1. âœ… **Private by default** â€” Nothing is shared until user explicitly chooses
2. âœ… **Granular control** â€” Share specific areas, not all-or-nothing
3. âœ… **No retyping** â€” Share from existing data with one click
4. âœ… **Time-limited options** â€” Share for a period, auto-expire
5. âœ… **Instant revocation** â€” Take back access anytime
6. âœ… **Transparent audit** â€” Users always see who has access to what
7. âœ… **Encryption-backed** â€” Not just policy, but cryptographically enforced

**This is exactly what your community needs** â€” the safety to be vulnerable in their private space, with the flexibility to share deeply with trusted people when they choose. ğŸ’œ

---

## ğŸ”„ NOSTR RELIABILITY FALLBACK

<aside>
âš ï¸

**Nostr relays can be slow or unreliable.** The app must handle this gracefully.

</aside>

### Fallback Strategy

1. **Primary Auth:** Try Nostr login first
2. **If Nostr is slow (>3 seconds):** Show "Connecting..." spinner, continue trying in background
3. **If Nostr fails:** Fall back to database-only mode using cached nPub
4. **Background Sync:** When Nostr becomes available, sync any queued data

### What This Means in Practice

| Scenario | User Experience |
| --- | --- |
| Nostr works | Instant login, full features |
| Nostr slow | Login works, social features load in background |
| Nostr down | Login works (cached), social feed shows "syncing..." |
| First-time user + Nostr down | Show option to create local account, sync to Nostr later |

**Key Principle:** The app should NEVER be unusable just because a relay is having a bad day.

---

## ğŸ” ENVIRONMENT VARIABLES (Replit Secrets)

<aside>
ğŸ’¡

**What are environment variables?** Think of them as "secret passwords" that your app needs to work, but you don't want anyone else to see. Replit calls these "Secrets."

</aside>

### Why This Matters

When you build an app, some information needs to stay private:

- Database connection info (so hackers can't access your data)
- Admin access keys (so only YOU can manage the app)
- API keys for services (so others can't use your accounts)

**Replit's "Secrets" feature** stores these securely â€” they're never visible in your code or to anyone viewing your project.

### Required Secrets for This App

| Secret Name | What It Is | Where to Get It |
| --- | --- | --- |
| **DATABASE_URL** | Connection to your PostgreSQL database | Auto-provided by Replit when you add a database |
| **ADMIN_NPUB** | Your Nostr public key â€” identifies YOU as the admin | From your Nostr client (Primal, Damus, etc.) |
| **SESSION_SECRET** | Random string for secure login sessions | Generate any random 32+ character string |

### How to Add Secrets in Replit

1. Open your Replit project
2. Click the ğŸ”’ **Secrets** tab in the left sidebar (or Tools â†’ Secrets)
3. Click "+ New Secret"
4. Enter the name (e.g., `ADMIN_NPUB`) and value
5. Click "Add Secret"
6. The app can now access it securely

**Your code accesses these like:**

```jsx
const adminNpub = process.env.ADMIN_NPUB
const databaseUrl = process.env.DATABASE_URL
```

---

## ğŸ“± PWA (Progressive Web App) SETUP

<aside>
ğŸ“²

**PWA = Your app works like a native app** without going through the App Store (no 30% Apple tax!)

</aside>

### What PWA Gives Users

- "Add to Home Screen" button
- App icon on their phone
- Works offline (for cached content)
- No app store approval needed
- Instant updates (no waiting for app store review)

### Required Files

**1. manifest.json** (tells the phone about your app)

```json
{
  "name": "My Masterpiece",
  "short_name": "Masterpiece",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#1a1a2e",
  "theme_color": "#9b59b6",
  "icons": [
    { "src": "/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}
```

**2. Service Worker** (makes offline work)

- Caches key app files
- Enables background sync
- Replit can auto-generate this with the right framework

**3. Link manifest in HTML**

```html
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#9b59b6">
```

### Install Prompt

Show users a friendly "Install App" button:

> "ğŸ“² Add My Masterpiece to your home screen for the best experience!"
> 

---

## ğŸ“Š BUILT-IN ANALYTICS (No Third Parties)

<aside>
ğŸ“Š

**THE GOAL: You own ALL analytics data.** No Google Analytics, no third-party trackers, no selling user data. Privacy-respecting metrics built directly into the app.

</aside>

### Why Built-In Analytics?

| Third-Party Analytics | Built-In Analytics |
| --- | --- |
| âŒ Sends user data to Google/Facebook | âœ… Data stays in YOUR database |
| âŒ Privacy concerns for users | âœ… Privacy-respecting by design |
| âŒ Extra scripts slow down app | âœ… Lightweight, no extra load |
| âŒ Blocked by ad blockers | âœ… Always works |
| âŒ Monthly fees for premium features | âœ… Free forever (you built it) |

### Two Analytics Dashboards

| Dashboard | Who Sees It | What It Shows |
| --- | --- | --- |
| **ğŸ‘‘ Platform Owner (You)** | Only your ADMIN_NPUB | Entire platform health, all communities, revenue |
| **ğŸ  Community Creator** | Each community owner | Their community only: members, engagement, content |

---

### ğŸ‘‘ PLATFORM OWNER ANALYTICS (Valerie's Dashboard)

<aside>
ğŸ‘‘

**This is YOUR bird's-eye view of the entire platform.** See everything at a glance.

</aside>

#### Overview Metrics (Top of Dashboard)

| Metric | What It Tells You | How It's Calculated |
| --- | --- | --- |
| **Total Users** | How many people have accounts | Count of unique nPubs |
| **Active Users (DAU/WAU/MAU)** | Who's actually using the app | Users who logged in today/this week/this month |
| **Total Paid Members** | Paying customers across all communities | Count of active memberships |
| **Total Revenue (All Time)** | Money earned through the platform | Sum of all Lightning payments recorded |
| **Revenue This Month** | Current month's earnings | Sum of payments this calendar month |
| **MRR (Monthly Recurring Revenue)** | Predictable monthly income | Active monthly memberships Ã— price |

#### User Growth Charts

- **New Users Over Time** â€” Line chart showing signups per day/week/month
- **User Retention Curve** â€” What % of users come back after 1 day, 7 days, 30 days?
- **Churn Rate** â€” What % of paid members cancel each month?
- **Conversion Funnel:**
    - Visitors â†’ Signups â†’ Free Users â†’ Paid Members
    - Where are people dropping off?

#### Engagement Metrics

| Metric | What It Tells You | Healthy Range |
| --- | --- | --- |
| **Sessions per User** | How often people open the app | 3-5x per week = good |
| **Avg Session Duration** | How long they stay | 5-15 min = healthy |
| **Course Completion Rate** | Do people finish what they start? | 30-50% = good for courses |
| **Journal Entries per User** | Are people using private features? | Any usage = engaged user |
| **Zaps Sent/Received** | Is the V4V economy working? | Growing = healthy |

#### Content Performance

- **Most Viewed Courses** â€” What content is popular?
- **Most Completed Courses** â€” What content delivers value?
- **Drop-off Points** â€” Where do people stop watching?
- **Most Zapped Content** â€” What do people value enough to pay for?

#### Community Health (If Multiple Communities)

- **Communities by Size** â€” Ranking of communities by member count
- **Communities by Revenue** â€” Which are earning the most?
- **Communities by Engagement** â€” Which have the most active members?

#### Revenue Analytics

- **Revenue Over Time** â€” Line chart of daily/weekly/monthly revenue
- **Revenue by Source:**
    - Memberships (recurring)
    - One-time purchases
    - Zaps/tips
- **Average Revenue Per User (ARPU)** â€” Total revenue Ã· total users
- **Lifetime Value (LTV)** â€” How much does an average member pay over their lifetime?
- **Projected Revenue** â€” Based on current MRR and growth rate

---

### ğŸ  COMMUNITY CREATOR ANALYTICS

<aside>
ğŸ 

**Each community creator sees analytics for THEIR community only.** They can't see other communities or platform-wide data.

</aside>

#### Overview Metrics (Creator Dashboard)

| Metric | What It Tells Them |
| --- | --- |
| **Total Members** | How many people are in their community |
| **Active Members (This Week)** | Who's actually showing up |
| **New Members (This Month)** | Growth rate |
| **Churned Members (This Month)** | Who left and when |
| **Net Growth** | New members minus churned |
| **Revenue (This Month)** | Their earnings |
| **MRR** | Their predictable monthly income |

#### Member Engagement

- **Member Activity List:**
    - Name, join date, last active, courses completed, engagement score
    - Sort by: most active, least active, newest, at-risk (inactive 7+ days)
- **Engagement Score** â€” Calculated from logins + course progress + community participation
- **At-Risk Members** â€” Haven't logged in for 7+ days (reach out before they churn!)

#### Content Performance (Their Content)

- **Course Completion Rates** â€” Which courses do members finish?
- **Most Popular Content** â€” What's getting the most views?
- **Content Drop-off** â€” Where do members stop?
- **Zaps Received** â€” Which content earned the most tips?

#### Pod/Group Analytics (If They Have Accountability Pods)

- **Active Pods** â€” How many pods are running?
- **Pod Health Score** â€” Are members checking in regularly?
- **Pod Retention** â€” Do people stay in pods or drop out?

---

### ğŸ› ï¸ WHAT DATA WE TRACK (Privacy-Respecting)

<aside>
ğŸ›¡ï¸

**We track ACTIONS, not personal content.** We know THAT you logged in, not WHAT you wrote in your journal.

</aside>

#### Events We Log

```sql
-- Analytics events table
analytics_events (
  id TEXT PRIMARY KEY,
  user_npub TEXT,              -- Who did it (anonymizable)
  event_type TEXT,             -- What happened
  event_data JSONB,            -- Additional context (no private content)
  community_id TEXT,           -- Which community (if applicable)
  created_at TIMESTAMP
)

-- Event types we track:
-- 'user_signup'        - New account created
-- 'user_login'         - User logged in
-- 'user_logout'        - User logged out
-- 'membership_started' - Paid membership began
-- 'membership_ended'   - Membership cancelled/expired
-- 'course_started'     - User began a course
-- 'course_progress'    - User completed a lesson (lesson_id, not content)
-- 'course_completed'   - User finished entire course
-- 'content_viewed'     - User viewed content (content_id, duration)
-- 'zap_sent'           - User zapped someone (amount, recipient)
-- 'zap_received'       - User received a zap (amount, sender)
-- 'pod_joined'         - User joined an accountability pod
-- 'pod_checkin'        - User did a pod check-in (no content logged)
-- 'feature_used'       - User used a feature (feature_name)
```

#### What We DON'T Track

- âŒ Journal content (encrypted, we can't see it anyway)
- âŒ Goal details (encrypted)
- âŒ AI chat content (never touches our server)
- âŒ Private notes (encrypted)
- âŒ Sharing grant contents (encrypted)

**We track the FACT that someone used a feature, not WHAT they did with it.**

---

### ğŸ“± ANALYTICS DASHBOARD UI

#### Platform Owner Dashboard Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘‘ MY MASTERPIECE â€” PLATFORM ANALYTICS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TOTAL USERS  â”‚ â”‚ ACTIVE TODAY â”‚ â”‚ PAID MEMBERS â”‚ â”‚ MRR          â”‚  â”‚
â”‚  â”‚    1,247     â”‚ â”‚     312      â”‚ â”‚     89       â”‚ â”‚   \$4,183    â”‚  â”‚
â”‚  â”‚   +12% â†‘    â”‚ â”‚    +5% â†‘    â”‚ â”‚   +18% â†‘    â”‚ â”‚   +22% â†‘    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  USER GROWTH (Last 30 Days)                               â”‚  â”‚
â”‚  â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®       â”‚  â”‚
â”‚  â”‚  â”‚                                        â•±â•²              â”‚       â”‚  â”‚
â”‚  â”‚  â”‚                              â•±â•²â•±â•²â•±â•²â•±  â•²             â”‚       â”‚  â”‚
â”‚  â”‚  â”‚                    â•±â•²â•±â•²â•±â•²â•±â•²â•±          â•²            â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  â•±â•²â•±â•²â•±â•²â•±â•²â•±â•²â•±â•²â•±â•²â•±                                  â”‚       â”‚  â”‚
â”‚  â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TOP CONTENT              â”‚ â”‚ REVENUE BY SOURCE          â”‚  â”‚
â”‚  â”‚ 1. 11x LOVE Intro (89%)  â”‚ â”‚ â– â– â– â– â– â– â–  Memberships 72%  â”‚  â”‚
â”‚  â”‚ 2. Money Mindset (76%)   â”‚ â”‚ â– â– â–  Zaps 18%            â”‚  â”‚
â”‚  â”‚ 3. God First (71%)       â”‚ â”‚ â– â–  One-time 10%         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Community Creator Dashboard Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  MY COMMUNITY ANALYTICS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MEMBERS      â”‚ â”‚ ACTIVE (7d)  â”‚ â”‚ NEW (30d)    â”‚ â”‚ MY MRR       â”‚  â”‚
â”‚  â”‚     47       â”‚ â”‚     31       â”‚ â”‚     8        â”‚ â”‚   \$2,209    â”‚  â”‚
â”‚  â”‚   +3 â†‘      â”‚ â”‚    66% â†‘    â”‚ â”‚   +4 vs last â”‚ â”‚   +12% â†‘    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MEMBER LIST                              [Search...]    â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  Name          Joined    Last Active  Courses  Score     â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  ğŸŸ¢ Sarah M.    Jan 5     2 hrs ago    3/5      92        â”‚  â”‚
â”‚  â”‚  ğŸŸ¢ Mike T.     Jan 12    Yesterday    2/5      78        â”‚  â”‚
â”‚  â”‚  ğŸŸ¡ Lisa K.     Dec 28    5 days ago   1/5      45        â”‚  â”‚
â”‚  â”‚  ğŸ”´ John D.     Dec 15    12 days ago  0/5      12  âš ï¸    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  ğŸŸ¢ = Active    ğŸŸ¡ = At risk    ğŸ”´ = Inactive (reach out!)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MY COURSE PERFORMANCE    â”‚ â”‚ ENGAGEMENT THIS WEEK       â”‚  â”‚
â”‚  â”‚ Intro to 11x LOVE: 89%  â”‚ â”‚ Logins: 142                â”‚  â”‚
â”‚  â”‚ Money Module: 67%       â”‚ â”‚ Course views: 89           â”‚  â”‚
â”‚  â”‚ Spirituality: 54%       â”‚ â”‚ Pod check-ins: 23          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“ˆ KEY METRICS EXPLAINED

#### For Platform Health

| Metric | Formula | Why It Matters |
| --- | --- | --- |
| **DAU/MAU Ratio** | Daily Active / Monthly Active | Measures "stickiness" â€” >20% is good |
| **Churn Rate** | Cancelled / Total Members | <5% monthly is healthy |
| **LTV (Lifetime Value)** | ARPU Ã— Avg Membership Length | How much a member is worth |
| **CAC (Customer Acquisition Cost)** | Marketing Spend / New Members | Keep LTV > 3Ã— CAC |
| **Net Revenue Retention** | (MRR + Expansion - Churn) / MRR | >100% = growing without new sales |

#### For Community Health

| Metric | Formula | Why It Matters |
| --- | --- | --- |
| **Engagement Score** | Weighted: logins + courses + participation | Identifies power users vs lurkers |
| **At-Risk Members** | No login in 7+ days | Reach out before they churn |
| **Course Completion** | Finished / Started | Shows content quality |
| **Pod Retention** | Still in pod after 30 days | Shows community value |

---

### ğŸ–¥ï¸ TECHNICAL IMPLEMENTATION

#### Database Tables for Analytics

```sql
-- Raw events (append-only log)
analytics_events (
  id TEXT PRIMARY KEY,
  user_npub TEXT,
  event_type TEXT,
  event_data JSONB,
  community_id TEXT,
  session_id TEXT,
  created_at TIMESTAMP DEFAULT NOW()
)

-- Daily aggregates (computed nightly)
daily_stats (
  date DATE,
  community_id TEXT,        -- NULL = platform-wide
  total_users INT,
  active_users INT,
  new_users INT,
  paid_members INT,
  revenue_sats BIGINT,
  courses_started INT,
  courses_completed INT,
  PRIMARY KEY (date, community_id)
)

-- User engagement scores (updated daily)
user_engagement (
  user_npub TEXT PRIMARY KEY,
  community_id TEXT,
  last_login TIMESTAMP,
  login_count_30d INT,
  courses_completed INT,
  engagement_score INT,      -- 0-100
  status TEXT,               -- 'active', 'at_risk', 'inactive'
  updated_at TIMESTAMP
)
```

#### Computing Engagement Score

```jsx
function calculateEngagementScore(user) {
  let score = 0
  
  // Recency (40 points max)
  const daysSinceLogin = daysBetween(user.lastLogin, now())
  if (daysSinceLogin === 0) score += 40
  else if (daysSinceLogin <= 3) score += 30
  else if (daysSinceLogin <= 7) score += 20
  else if (daysSinceLogin <= 14) score += 10
  // else 0
  
  // Frequency (30 points max)
  const loginsThisMonth = user.loginCount30d
  if (loginsThisMonth >= 20) score += 30
  else if (loginsThisMonth >= 10) score += 20
  else if (loginsThisMonth >= 5) score += 10
  else if (loginsThisMonth >= 1) score += 5
  
  // Depth (30 points max)
  const coursesCompleted = user.coursesCompleted
  score += Math.min(coursesCompleted * 10, 30)
  
  return score // 0-100
}

// Status based on score:
// 70-100 = 'active' (ğŸŸ¢)
// 40-69 = 'at_risk' (ğŸŸ¡)
// 0-39 = 'inactive' (ğŸ”´)
```

#### Real-Time vs Batch Processing

| Data Type | Processing | Why |
| --- | --- | --- |
| **Event logging** | Real-time | Capture everything as it happens |
| **Overview metrics** | Real-time | Users expect instant updates |
| **Charts & graphs** | Batch (nightly) | Historical data doesn't change |
| **Engagement scores** | Batch (nightly) | Complex calculation, not urgent |
| **Alerts (at-risk)** | Batch (daily) | Send morning digest |

---

### ğŸ“§ AUTOMATED ALERTS & REPORTS

#### For Platform Owner (You)

- **Weekly Summary Email:**
    - Total users, new signups, churn
    - Revenue: this week vs last week
    - Top performing content
    - Any issues flagged
- **Instant Alerts:**
    - ğŸš¨ Revenue spike or drop (>20% change)
    - ğŸš¨ Unusual churn (>3 cancellations in a day)
    - ğŸš¨ Technical errors (payment failures, etc.)

#### For Community Creators

- **Weekly Digest:**
    - New members this week
    - At-risk members (nudge them!)
    - Course completion stats
    - Their MRR update
- **Instant Alerts:**
    - ğŸ‰ New member joined!
    - âš ï¸ Member hasn't logged in for 7 days
    - ğŸ’¸ Someone zapped their content

---

---

### ğŸ† ENGAGEMENT LEADERBOARD & REWARDS SYSTEM

<aside>
ğŸ†

**THE GOAL: Recognize and reward your most engaged, helpful members.** Track meaningful contributions, not just vanity metrics.

</aside>

#### What We Track for Engagement

| Behavior | What It Measures | Points |
| --- | --- | --- |
| **Courses/Experiments Completed** | Finishing a full course or 11x LOVE experiment | **20 pts each** |
| **Welcomes New Members** | Being the welcome wagon for newcomers | **10 pts each** |
| **Hosts an Event** | Creating and running a community event | **10 pts each** |
| **Attends an Event** | Showing up for community events (RSVP + join) | **5 pts each** |
| **Daily Check-in** | Logging in and engaging each day | **5 pts each** |
| **Pod Check-ins** | Showing up for accountability pod | **5 pts each** |
| **Posts Created** | Contributing to the community feed | **5 pts each** |
| **Helpful Replies** | Responding to others' posts | **3 pts each** |
| **Buddy Support** | Engaging with accountability partner | **3 pts each** |
| **Zaps Sent** | Generosity â€” supporting others' content | **1 pt per zap** |
| **Zaps Received** | Creating valuable content others appreciate | **1 pt per zap** |
| **Streak Days** | Consistent daily logins | **1 pt/day** (bonus at 7, 30, 90 days) |

#### Event Attendance Tracking

<aside>
ğŸ“…

**How do we know if someone actually attended an event?** Two options:

</aside>

**Option 1: RSVP + Self-Report (Simple MVP)**

- User RSVPs to event â†’ tracked in database
- After event ends, user clicks "I attended!" button â†’ 5 pts awarded
- Honor system, but most people won't lie for 5 points

**Option 2: Integration with Event Platform (Post-MVP)**

- If using Zoom: Check participant list via Zoom API
- If using in-app rooms (future): Track who joined the room
- Automatic verification = no honor system needed

**For MVP:** Use Option 1 (RSVP + self-report). It's simple and works.

#### Engagement Score Formula

```jsx
// Monthly Engagement Score (resets each month for fresh competition)
function calculateMonthlyEngagement(user) {
  return (
    (user.postsCreated * 5) +
    (user.repliesGiven * 3) +
    (user.zapsSent * 2) +
    (user.zapsReceived * 1) +
    (user.coursesCompleted * 10) +
    (user.podCheckins * 5) +
    (user.buddyInteractions * 3) +
    (user.loginStreak) +
    (user.welcomeMessages * 5)
  )
}

// Lifetime Engagement Score (cumulative, never resets)
function calculateLifetimeEngagement(user) {
  return sumAllMonthlyScores(user) + bonusAchievements(user)
}
```

#### Leaderboard Types

| Leaderboard | Who It Highlights | Refresh Rate |
| --- | --- | --- |
| **ğŸ”¥ This Week's MVPs** | Most engaged this week | Real-time |
| **ğŸŒŸ Monthly Stars** | Top contributors this month | Monthly reset |
| **ğŸ’œ Most Generous** | Highest zaps sent (supporting others) | Monthly |
| **ğŸ¯ Content Creators** | Most zaps received (great content) | Monthly |
| **ğŸ¤ Community Builders** | Most replies + welcomes (helping others) | Monthly |
| **ğŸ“š Growth Seekers** | Most courses completed | All-time |
| **ğŸ… Hall of Fame** | Highest lifetime engagement | All-time |

#### Badges & Achievements

| Badge | How to Earn | Display |
| --- | --- | --- |
| **ğŸ”¥ On Fire** | 7-day login streak | Shows on profile |
| **âš¡ Zap Master** | Sent 100+ zaps | Shows on profile |
| **ğŸ’ Valued Voice** | Received 50+ zaps on content | Shows on profile |
| **ğŸ¤ Community Champion** | Welcomed 10+ new members | Shows on profile |
| **ğŸ“š Knowledge Seeker** | Completed 5+ courses | Shows on profile |
| **ğŸ¯ Consistency Queen** | 30-day login streak | Shows on profile |
| **ğŸ¦‹ Transformation** | 90-day member milestone | Shows on profile |
| **ğŸ‘‘ Founding Member** | Joined during launch period | Permanent badge |
| **â­ Monthly MVP** | Top of leaderboard that month | Shows on profile for that month |

#### Rewards System

<aside>
ğŸ

**Make engagement FUN with real rewards.** These can be automated or manually given by you.

</aside>

**Automatic Rewards:**

- ğŸ† Monthly MVP gets featured in community announcements
- ğŸ–ï¸ Top 3 each month get special badge displayed
- âš¡ Engagement milestones trigger celebratory notifications
- ğŸ”“ High engagement unlocks premium widgets or features

**Manual Rewards (You Decide):**

- ğŸ’¸ Zap bonus pool â€” you zap the top contributors
- ğŸ Free month of membership for top engager
- ğŸ“ 1:1 call with you (VIP treatment)
- ğŸ¤ Featured spotlight post in community
- ğŸ“¦ Physical prizes (stickers, deck cards, merch)

#### Engagement Dashboard UI (What Users See)

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† COMMUNITY LEADERBOARD                        [This Week â–¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  YOUR STATS                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ RANK        â”‚ â”‚ POSTS       â”‚ â”‚ ZAPS SENT   â”‚ â”‚ ZAPS RECEIVEDâ”‚  â”‚
â”‚  â”‚   #12       â”‚ â”‚     8       â”‚ â”‚     23      â”‚ â”‚      15      â”‚  â”‚
â”‚  â”‚  â†‘3 spots   â”‚ â”‚  +3 this wk â”‚ â”‚  1,150 sats â”‚ â”‚   890 sats   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ… YOUR BADGES: ğŸ”¥ On Fire  ğŸ“š Knowledge Seeker  ğŸ¤ Champion â”‚
â”‚                                                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  THIS WEEK'S TOP CONTRIBUTORS                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  ğŸ¥‡ Sarah M.     â”‚ 847 pts â”‚ 12 posts, 45 zaps sent, 7d streakâ”‚
â”‚  ğŸ¥ˆ Mike T.      â”‚ 692 pts â”‚ 8 posts, 38 zaps sent, 5d streak â”‚
â”‚  ğŸ¥‰ Lisa K.      â”‚ 584 pts â”‚ 15 replies, 22 zaps received     â”‚
â”‚  4. You         â”‚ 423 pts â”‚ Keep going! ğŸ”¥                    â”‚
â”‚  5. John D.      â”‚ 398 pts â”‚                                   â”‚
â”‚                                                               â”‚
â”‚  [View Full Leaderboard]  [My Achievements]                   â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### What YOU (Admin) See

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘‘ ADMIN: ENGAGEMENT INSIGHTS                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ENGAGEMENT HEALTH THIS MONTH                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TOTAL POSTS â”‚ â”‚ TOTAL ZAPS  â”‚ â”‚ AVG ENGAGE  â”‚ â”‚ ACTIVE RATE  â”‚  â”‚
â”‚  â”‚    342      â”‚ â”‚   1,247     â”‚ â”‚   68 pts    â”‚ â”‚    72%       â”‚  â”‚
â”‚  â”‚  +18% â†‘     â”‚ â”‚  +24% â†‘     â”‚ â”‚  +12% â†‘     â”‚ â”‚  (34/47)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  TOP CONTRIBUTORS (Candidates for Rewards)                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Name          Posts  Replies  Zapsâ†‘  Zapsâ†“  Score   [Action] â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Sarah M.        12      23      45      28    847    [ğŸ Reward]â”‚
â”‚  Mike T.          8      19      38      15    692    [ğŸ Reward]â”‚
â”‚  Lisa K.          5      34      22      41    584    [ğŸ Reward]â”‚
â”‚                                                               â”‚
â”‚  ENGAGEMENT DISTRIBUTION                                      â”‚
â”‚  â”œâ”€ ğŸŸ¢ Highly Engaged (70+ pts): 12 members (26%)             â”‚
â”‚  â”œâ”€ ğŸŸ¡ Moderately Engaged (30-69 pts): 18 members (38%)       â”‚
â”‚  â”œâ”€ ğŸ”´ Low Engagement (<30 pts): 17 members (36%)             â”‚
â”‚                                                               â”‚
â”‚  [Export Report]  [Send Rewards]  [Announce MVPs]             â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Database Schema for Engagement Tracking

```sql
-- Engagement events (granular tracking)
engagement_events (
  id TEXT PRIMARY KEY,
  user_npub TEXT,
  event_type TEXT,           -- 'post', 'reply', 'zap_sent', 'zap_received', 
                              -- 'course_complete', 'pod_checkin', 'welcome', 'login'
  event_data JSONB,          -- Details (zap amount, post_id, etc.)
  points_earned INT,
  community_id TEXT,
  created_at TIMESTAMP
)

-- User engagement summary (updated real-time)
user_engagement_summary (
  user_npub TEXT,
  community_id TEXT,
  period TEXT,               -- 'weekly', 'monthly', 'lifetime'
  period_start DATE,
  posts_count INT DEFAULT 0,
  replies_count INT DEFAULT 0,
  zaps_sent_count INT DEFAULT 0,
  zaps_sent_sats BIGINT DEFAULT 0,
  zaps_received_count INT DEFAULT 0,
  zaps_received_sats BIGINT DEFAULT 0,
  courses_completed INT DEFAULT 0,
  pod_checkins INT DEFAULT 0,
  buddy_interactions INT DEFAULT 0,
  welcomes_given INT DEFAULT 0,
  current_streak INT DEFAULT 0,
  longest_streak INT DEFAULT 0,
  total_points INT DEFAULT 0,
  rank INT,
  updated_at TIMESTAMP,
  PRIMARY KEY (user_npub, community_id, period, period_start)
)

-- Badges earned
user_badges (
  id TEXT PRIMARY KEY,
  user_npub TEXT,
  badge_type TEXT,           -- 'on_fire', 'zap_master', 'champion', etc.
  earned_at TIMESTAMP,
  expires_at TIMESTAMP,      -- NULL = permanent
  metadata JSONB             -- Extra info (which month for MVP, etc.)
)

-- Rewards given
rewards_log (
  id TEXT PRIMARY KEY,
  recipient_npub TEXT,
  reward_type TEXT,          -- 'zap_bonus', 'free_month', 'spotlight', 'manual'
  reward_value TEXT,         -- Description or amount
  reason TEXT,               -- Why they earned it
  given_by TEXT,             -- Admin npub or 'system'
  given_at TIMESTAMP
)
```

#### ğŸ¯ "TRAVELING BADGES" (Scarcity-Based Recognition)

<aside>
ğŸ’

**THE IDEA: Special badges that travel through the community â€” one holder at a time.** Scarcity makes it special. The chain of kindness becomes a story.

</aside>

**How It Works:**

1. **You (community creator) "birth" a badge** at the start of each month (or as a surprise mid-month!)
2. **You give it to the first person** with a personal note: "I'm giving this to Sarah for being so welcoming"
3. **Sarah is now the ONLY holder** â€” everyone can see who has the badge
4. **Sarah has 24-48 hours to pass it forward** with her own note to the next person
5. **The badge carries its FULL history** â€” every note, every person, the whole chain
6. **Goal: See how far it can travel!** "ğŸ’œ Kindness Badge has reached 47 people this month!"

**Why Scarcity Works:**

- ğŸ† **Only ONE badge traveling at a time** â€” makes it genuinely special
- ğŸ“– **The notes become a story** â€” a thread of kindness through your community
- ğŸ¯ **Clear ownership** â€” "Who has the badge right now?" is always visible
- ğŸ® **Monthly ritual** â€” new badges each month keep it fresh
- âœ¨ **Surprise badges** â€” drop one mid-month unexpectedly for extra excitement

**The Flow:**

```
You (Person Zero) â†’ Sarah (#1) â†’ Jon (#2) â†’ Lisa (#3) â†’ Mike (#4) â†’ ...
     "Welcome!"      "So helpful"   "Great post"   "Encouraged me"
```

**What Everyone Sees:**

- ğŸ”´ **LIVE: Who has the badge RIGHT NOW**
- ğŸ“Š **Chain length:** "This badge has traveled through 23 people!"
- ğŸ“œ **Full history:** Click to see every person + every note in the chain
- ğŸ **Monthly goal:** "Can we get to 100 this month?"

**If Someone Doesn't Pass (Time Expires):**

- Badge returns to YOU (admin) to re-seed
- No penalty or shame for the person â€” life happens!
- You pick a new starting person and the chain continues

**Monthly Badge Ritual Ideas:**

| Badge | Theme |
| --- | --- |
| **ğŸ’œ Kindness Badge** | General helpfulness |
| **âœ¨ Encourager Badge** | Lifting spirits |
| **ğŸ”¥ Inspirer Badge** | Sharing wisdom/breakthroughs |
| **ğŸŒŸ Rising Star Badge** | Recognizing growth |
| **ğŸ¤— Welcome Badge** | Making newbies feel home |

**Pass It On Badge Types:**

| Badge | Given For | Time Limit |
| --- | --- | --- |
| **ğŸ’œ Helpful Hero** | Someone who helped you | 24 hours |
| **âœ¨ Encourager** | Someone who lifted your spirits | 24 hours |
| **ğŸ”¥ Inspirer** | Someone whose post inspired you | 24 hours |
| **ğŸ¤— Warm Welcome** | Someone who made you feel included | 48 hours |
| **ğŸŒŸ Rising Star** | Someone showing great progress | 48 hours |

**The User Experience:**

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‰ YOU RECEIVED A BADGE!                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚       ğŸ’œ HELPFUL HERO                                      â”‚
â”‚                                                           â”‚
â”‚   Sarah thinks you're amazing!                           â”‚
â”‚   "Thanks for explaining the journaling feature â€”         â”‚
â”‚    you saved me so much time!"                           â”‚
â”‚                                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                           â”‚
â”‚   ğŸ‘‰ **Pass it on!**                                       â”‚
â”‚   Who's been helpful to YOU lately?                       â”‚
â”‚   Pass this badge within 24 hours to keep the             â”‚
â”‚   kindness flowing. (No pressure â€” it's optional!)        â”‚
â”‚                                                           â”‚
â”‚   â° Time remaining: 23h 42m                               â”‚
â”‚                                                           â”‚
â”‚   [Pass to Someone ğŸ’œ]    [Keep & Don't Pass]              â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Passing Flow:**

```jsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASS YOUR ğŸ’œ HELPFUL HERO BADGE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚   Who deserves this?                                      â”‚
â”‚   [Search members...                            ğŸ”]       â”‚
â”‚                                                           â”‚
â”‚   ğŸ’¡ Suggestions (recently interacted with):               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ‘¤ Mike T. â€” replied to your post today          â”‚   â”‚
â”‚   â”‚ ğŸ‘¤ Lisa K. â€” welcomed you to the community       â”‚   â”‚
â”‚   â”‚ ğŸ‘¤ John D. â€” in your accountability pod          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â”‚   Add a message (optional):                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ "You always have the best advice!"               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                           â”‚
â”‚   [Send Badge ğŸ’œ]                                         â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**What Users Collect:**

- **"ğŸ’œ Received" badge** â€” Permanent record that someone thought you were helpful
- **"ğŸ’œ Passed" counter** â€” Shows how many times you've passed kindness forward
- **Chain length** â€” "This badge has been passed 12 times!" (fun community stat)

**Admin View (You):**

- See the longest active chains
- See who starts the most chains (generous recognizers)
- See who receives the most (community helpers)
- Option to "seed" a new badge into the community to kickstart chains

**Database Schema:**

```sql
-- Pass-it-on badge instances
pass_it_on_badges (
  id TEXT PRIMARY KEY,
  badge_type TEXT,              -- 'helpful_hero', 'encourager', etc.
  chain_id TEXT,                -- Links all passes in one chain
  chain_position INT,           -- 1st, 2nd, 3rd in chain...
  current_holder_npub TEXT,     -- Who has it now
  giver_npub TEXT,              -- Who gave it to them
  giver_message TEXT,           -- Optional personal note
  received_at TIMESTAMP,
  expires_at TIMESTAMP,         -- When they must pass or it expires
  passed_at TIMESTAMP,          -- NULL if not yet passed
  passed_to_npub TEXT,          -- NULL if not yet passed
  status TEXT                   -- 'active', 'passed', 'expired', 'kept'
)

-- User's permanent "received" badges (separate from active pass-it-on)
user_received_badges (
  id TEXT PRIMARY KEY,
  user_npub TEXT,
  badge_type TEXT,
  received_from_npub TEXT,
  message TEXT,
  received_at TIMESTAMP
)
```

**Why This Works for Your Community:**

- âœ… **Encourages generosity** â€” You have to notice someone else's kindness
- âœ… **Creates connection** â€” Personal messages make people feel seen
- âœ… **No pressure** â€” Expiring quietly means no guilt
- âœ… **Fun game element** â€” "This badge has traveled through 47 people!"
- âœ… **Community-building** â€” Surfaces the helpers who might otherwise go unnoticed
- âœ… **Aligned with V4V** â€” Recognizing value, passing value forward

---

## ğŸ® GAMIFICATION FRAMEWORK: Octalysis Prime

<aside>
ğŸ¯

**THE FOUNDATION: Yu-kai Chou's Octalysis Framework** â€” The science of motivation applied to community engagement. We're not just adding "gamification" â€” we're designing for human motivation.

</aside>

### The 8 Core Drives (Octalysis)

Every feature should tap into one or more of these core drives:

| Core Drive | What It Is | How We Use It |
| --- | --- | --- |
| **1. Epic Meaning & Calling** | Feeling part of something bigger than yourself | 11x LOVE mission, God-centered purpose, community impact |
| **2. Development & Accomplishment** | Making progress, mastering skills, overcoming challenges | Course completion, streaks, badges, leaderboards, 11x LOVE tracking |
| **3. Empowerment of Creativity** | Creating, experimenting, expressing yourself | Customizable canvas, personal dashboard design, journal prompts |
| **4. Ownership & Possession** | Owning things, wanting to improve what you own | Your Masterpiece (dashboard), Nostr identity YOU own, sats/Bitcoin |
| **5. Social Influence & Relatedness** | Connection, mentorship, competition, belonging | Pods, buddy matching, traveling badges, community feed, welcomes |
| **6. Scarcity & Impatience** | Wanting what's rare or limited | Traveling badges (only ONE holder!), founding member status, limited drops |
| **7. Unpredictability & Curiosity** | Surprise, mystery, not knowing what happens next | Surprise mid-month badges, random rewards, AI Learning Buddy insights |
| **8. Loss & Avoidance** | Avoiding losing progress or status | Streak protection, "don't drop the badge" urgency, membership expiration warnings |

### White Hat vs Black Hat Motivation

<aside>
âš–ï¸

**IMPORTANT:** We prioritize WHITE HAT drives (1-5) which create long-term positive motivation. BLACK HAT drives (6-8) are powerful but use sparingly â€” they create urgency but can feel manipulative.

</aside>

**Our Balance:**

- ğŸ¤ **Heavy use of Core Drives 1-5** â€” Purpose, progress, creativity, ownership, connection
- ğŸ–¤ **Light use of Core Drives 6-8** â€” Scarcity (traveling badges), surprise (mid-month drops), gentle urgency (badge time limits)

### How Each Feature Maps to Octalysis

| Feature | Primary Core Drive | Secondary Core Drives |
| --- | --- | --- |
| **11x LOVE Tracking** | CD2 (Accomplishment) | CD1 (Meaning), CD4 (Ownership) |
| **Traveling Badges** | CD6 (Scarcity) | CD5 (Social), CD7 (Curiosity), CD8 (Don't drop it!) |
| **Canvas/Dashboard** | CD3 (Creativity) | CD4 (Ownership) |
| **Accountability Pods** | CD5 (Social) | CD1 (Meaning), CD8 (Don't let your pod down) |
| **Leaderboards** | CD2 (Accomplishment) | CD5 (Social competition) |
| **Founding Member Badge** | CD6 (Scarcity) | CD4 (Ownership), CD1 (Being early) |
| **Surprise Badge Drops** | CD7 (Unpredictability) | CD6 (Scarcity) |
| **Zaps/Bitcoin Rewards** | CD4 (Ownership) | CD2 (Earning), CD5 (Generosity) |
| **AI Learning Buddy** | CD3 (Creativity) | CD7 (Curiosity â€” what will it say?) |
| **Streak System** | CD2 (Accomplishment) | CD8 (Don't break the streak!) |

### Design Principles from Octalysis

1. **Start with WHY (CD1)** â€” Always connect features back to the 11x LOVE mission and God-centered purpose
2. **Celebrate progress (CD2)** â€” Every small win gets acknowledged
3. **Let them create (CD3)** â€” Customization > prescription
4. **Make it theirs (CD4)** â€” User owns their data, their Bitcoin, their identity
5. **Build connection (CD5)** â€” Community features are the paid core
6. **Use scarcity wisely (CD6)** â€” Traveling badges, not artificial gates
7. **Surprise and delight (CD7)** â€” Random rewards > predictable schedules
8. **Gentle urgency only (CD8)** â€” Never shame, always encourage

### Future Gamification Ideas (Post-MVP)

- **Quests/Challenges** â€” "Complete 5 journal entries this week" (CD2 + CD7)
- **Mystery Boxes** â€” Random rewards for engagement milestones (CD7)
- **Mentor/Mentee System** â€” Experienced members guide newbies (CD1 + CD5)
- **Seasonal Events** â€” Special challenges during holidays or launches (CD6 + CD7)
- **Collaborative Goals** â€” "Can our community hit 1,000 check-ins this month?" (CD1 + CD5)

---

#### Anti-Gaming Measures

<aside>
ğŸ›¡ï¸

**Prevent people from cheating the leaderboard.**

</aside>

- **Zap minimum:** Zaps under 10 sats don't count (no 1-sat spam)
- **Self-zap excluded:** Can't zap your own content for points
- **Post quality:** Posts under 50 characters don't count
- **Reply quality:** "Nice!" or "ğŸ‘" replies don't count (minimum 20 chars)
- **Streak integrity:** Must actually USE the app, not just open it
- **Rate limiting:** Max 20 posts/day count toward points
- **Duplicate detection:** Copy-paste content flagged

#### Notifications for Engagement

**Users receive:**

- ğŸ‰ "You just earned the ğŸ”¥ On Fire badge!" (achievement unlocked)
- ğŸ“ˆ "You moved up to #8 on the leaderboard!" (rank change)
- ğŸ† "Congrats! You're this week's #3 contributor!" (weekly summary)
- âš¡ "Sarah zapped your post 500 sats!" (zap received)
- ğŸ’œ "You've sent 100 zaps! You're a Zap Master now!" (milestone)

**You (admin) receive:**

- ğŸ“Š Weekly engagement report
- ğŸ† "Time to announce this month's MVPs!"
- âš ï¸ "Engagement down 15% this week" (health alert)

---

### âœ… ANALYTICS BUILD CHECKLIST

**MVP (Build First):**

- [ ]  Event logging (track all key events)
- [ ]  Basic overview metrics (users, members, revenue)
- [ ]  Simple member list for creators
- [ ]  Last login tracking

**Post-MVP (Add Later):**

- [ ]  Charts and graphs
- [ ]  Engagement scoring
- [ ]  At-risk member alerts
- [ ]  Course completion tracking
- [ ]  Weekly email reports
- [ ]  Export to CSV

---

## ğŸ‘‘ ADMIN DASHBOARD

<aside>
ğŸ‘‘

**This is how YOU (Valerie) manage everything.** Only visible to your ADMIN_NPUB.

</aside>

### Admin Features Needed

| Feature | What It Does | Priority |
| --- | --- | --- |
| **Content Manager** | Upload courses, podcasts, blog posts | MVP |
| **Member List** | See all members, their status, payment history | MVP |
| **Revenue Dashboard** | Total earnings, monthly breakdown, member growth | MVP |
| **Community Settings** | Set prices, descriptions, access rules | MVP |
| **Announcement Tool** | Send messages to all members | Post-MVP |
| **Analytics** | Popular content, engagement metrics, churn | Post-MVP |

### Admin Access Check

```jsx
// Only show admin dashboard if logged-in user matches ADMIN_NPUB
if (user.npub === process.env.ADMIN_NPUB) {
  showAdminDashboard()
}
```

---

## âŒ ERROR HANDLING

<aside>
ğŸ›¡ï¸

**Things WILL go wrong.** The app must handle errors gracefully so users don't get confused.

</aside>

### Error Scenarios & Responses

| Error | User Sees | What Happens Behind the Scenes |
| --- | --- | --- |
| **Lightning payment fails** | "Payment didn't go through. Please try again or use a different wallet." | Log error, don't grant access, offer retry |
| **Nostr relay down** | "Social features loading..." (not an error message) | Try backup relays, fall back to database mode |
| **User's AI key invalid** | "Your API key isn't working. Please check it in Settings." | Clear stored key, prompt re-entry |
| **Database connection lost** | "Reconnecting..." then retry | Auto-retry 3x, then show support contact |
| **Content won't load** | "Couldn't load this content. Tap to retry." | Log error, show cached version if available |
| **Membership expired** | "Your membership has expired. Renew to keep access." | Show renewal flow, don't just block them |

### Error Design Principles

1. **Never show technical errors** to users (no "Error 500" or stack traces)
2. **Always offer a next step** (retry, contact support, go back)
3. **Be honest but calm** ("Something went wrong" not "CRITICAL FAILURE")
4. **Log everything** for debugging later

---

## âœ… REPLIT-READY CHECKLIST

<aside>
ğŸ“‹

**Before you paste this into Replit, make sure you have:**

</aside>

### Pre-Build Checklist

- [ ]  **Replit Pro account** ($25/mo) â€” needed for PostgreSQL
- [ ]  **Your Nostr keypair** â€” npub and nsec from any Nostr client
- [ ]  **OpenRouter account** â€” for AI testing (get API key at [openrouter.ai](http://openrouter.ai))
- [ ]  **Lightning wallet** â€” for testing payments (Alby or Mutiny recommended)
- [ ]  **App icons** â€” 192x192 and 512x512 PNG files for PWA
- [ ]  **Domain name** (optional) â€” or use free .[replit.app](http://replit.app) subdomain

### During Build Checklist

- [ ]  Add DATABASE_URL secret (auto-provided when you add PostgreSQL)
- [ ]  Add ADMIN_NPUB secret (your Nostr public key)
- [ ]  Add SESSION_SECRET (any random 32+ character string)
- [ ]  Test each chunk before moving to the next
- [ ]  Verify Nostr login works
- [ ]  Verify database saves data
- [ ]  Test Lightning payment flow
- [ ]  Test PWA "Add to Home Screen"

### Post-Build Checklist

- [ ]  All error scenarios handled gracefully
- [ ]  Admin dashboard accessible only to you
- [ ]  Free vs Paid access working correctly
- [ ]  Content loads (courses, podcasts)
- [ ]  Zapping works
- [ ]  Mobile experience feels good

---

---

## ğŸ›ï¸ NAMING ARCHITECTURE & HIERARCHY

<aside>
ğŸ—ï¸

**THE STRUCTURE: Communities â†’ Rooms â†’ Events.** Clear hierarchy that scales across multiple communities per user.

</aside>

### The Hierarchy

```
COMMUNITIES (top-level containers)
â””â”€â”€ ROOMS (persistent gathering spaces within a community)
â””â”€â”€ EVENTS (calendar-based, can link to a Room or standalone)
```

### Definitions

| Term | What It Is | Examples |
| --- | --- | --- |
| **Community** | The big container â€” a creator's paid membership space | "11x LOVE LaB", "Marketing Mastermind", "Writers Guild" |
| **Room** | A persistent gathering space within a community (24/7 or scheduled hours) | "The Sanctuary", "The CafÃ©", "Coworking Lounge" |
| **Event** | A calendar item â€” can happen IN a Room or be standalone | "Marketing Monday 10am", "Weekly Workshop", "Q&A with Valerie" |

### How They Relate

- **Room** = the PLACE (persistent, can be 24/7 or have "open hours")
- **Event** = the OCCASION (scheduled, appears on calendar)

An Event can:

1. **Happen in a Room** â†’ "Marketing Monday happens in the Coworking Lounge"
2. **Be standalone** â†’ "Live Q&A" (one-time Zoom link, no persistent Room)

### Example Structure

```
Community: 11x LOVE LaB
â”œâ”€â”€ Rooms:
â”‚   â”œâ”€â”€ The Sanctuary (24/7 meditation, ambient audio)
â”‚   â”œâ”€â”€ The CafÃ© (24/7 hangout, video + chat)
â”‚   â””â”€â”€ Workshop Studio (scheduled hours only)
â”‚
â””â”€â”€ Events:
    â”œâ”€â”€ "Morning Devotional" â€” Daily 7am â€” IN: The Sanctuary
    â”œâ”€â”€ "Marketing Monday" â€” Mon 10am â€” IN: Workshop Studio
    â””â”€â”€ "Live Q&A with Valerie" â€” Jan 30 â€” Standalone Zoom link
```

---

## ğŸ  COMMUNITY ROOMS (Gathering Spaces)

<aside>
ğŸšª

**THE GOAL: Persistent spaces where members gather.** 24/7 rooms for anytime connection, scheduled rooms for focused sessions. The 2am insomniac can find their people.

</aside>

### What Rooms Are

Community creators can define custom "Rooms" where members gather. Rooms can be:

- **24/7 (Always Open)** â€” Members can drop in anytime
- **Scheduled Hours** â€” Open during specific times (e.g., "Coworking: 9am-5pm weekdays")

### Room Types

| Type | Description | Use Case |
| --- | --- | --- |
| **Ambient** | Music/meditation space, presence only, minimal interaction | The Sanctuary, Meditation Room, Focus Music |
| **Hangout** | Video/voice + chat, social gathering | The CafÃ©, Night Owls Club, Community Lounge |
| **Coworking** | Focused work sessions, optional video, timer-based | Focus Room, Body Doubling, Pomodoro Sessions |
| **Workshop** | Structured sessions, presenter + audience | Training Room, Masterclass Studio |

### MVP Features (Build First)

- Creator defines rooms with: Name, Description, Type, External Link
- **External link field accepts ANY URL** â€” Zoom, Jitsi, Discord, Google Meet, custom
- Creator chooses their own tools (no lock-in)
- Access gating: PAID members only see/access room links
- Schedule: 24/7 OR specific open hours
- Presence indicator: "X members here now" (optional Nostr check-in)

### Post-MVP Features (Add Later)

- Native video embed (Jitsi/[Daily.co](http://Daily.co)) â€” no external link needed
- Native ambient audio player for meditation rooms
- Native chat within rooms (Nostr-native)
- Recording archive for workshop rooms
- "Raise hand" and moderation tools

### Room Configuration (Creator Settings)

```
Room Settings:
â”œâ”€â”€ Name: "The Sanctuary"
â”œâ”€â”€ Description: "24/7 meditation space with ambient music"
â”œâ”€â”€ Type: ambient | hangout | coworking | workshop
â”œâ”€â”€ Link: [Any external URL] OR "native" (post-MVP)
â”œâ”€â”€ Schedule: 24/7 | specific hours (calendar)
â”œâ”€â”€ Access: free | paid members only
â”œâ”€â”€ Presence tracking: on | off
â”œâ”€â”€ Chat enabled: yes | no
â””â”€â”€ Video enabled: yes | no
```

### Why External Links for MVP

You're right that even Circle and Mighty Networks creators end up using Zoom. Here's why we start with external links:

- **Reliability** â€” Zoom/Meet just work
- **Familiarity** â€” Members already know these tools
- **Creator choice** â€” Some prefer Zoom, others Discord, others Jitsi
- **Faster MVP** â€” No need to build video infrastructure yet
- **Upgrade path** â€” Native video added post-MVP as an OPTION

---

## ğŸ“… EVENTS SYSTEM

<aside>
ğŸ“†

**Events are calendar-based occasions.** They can happen IN a Room or be standalone with their own link.

</aside>

### Event Types

| Type | Description | Example |
| --- | --- | --- |
| **Room Event** | Happens inside an existing Room | "Marketing Monday" in Workshop Studio |
| **Standalone Event** | One-time event with its own link | "Guest Workshop" with unique Zoom link |
| **Recurring Event** | Repeats on schedule | "Daily Devotional" every day at 7am |

### Event Features

- **RSVP system** â€” "I'll be there" button, attendance tracking
- **Calendar integration** â€” Shows in user's aggregated calendar
- **Reminders** â€” Notification before event starts
- **Link reveal** â€” Meeting link shown only at event time (anti-Zoom-bombing)
- **Attendance tracking** â€” For engagement leaderboard (RSVP + "I attended" confirmation)

### Event Configuration

```
Event Settings:
â”œâ”€â”€ Title: "Marketing Monday"
â”œâ”€â”€ Description: "Focused coworking for marketing tasks"
â”œâ”€â”€ Community: 11x LOVE LaB
â”œâ”€â”€ Room: Workshop Studio (optional â€” or standalone)
â”œâ”€â”€ Link: [inherits from Room] OR [custom URL for standalone]
â”œâ”€â”€ Schedule: Every Monday 10am-11am
â”œâ”€â”€ RSVP enabled: yes | no
â”œâ”€â”€ Reminder: 15 min before | 1 hour before | 1 day before
â”œâ”€â”€ Recording: yes | no (post-MVP)
â””â”€â”€ Access: paid members only
```

---

## ğŸ“± USER DASHBOARD: AGGREGATED VIEW

<aside>
ğŸ‘¤

**ONE DASHBOARD, ALL COMMUNITIES.** Users see all their Rooms and Events across every community they're part of â€” no switching apps or logins.

</aside>

### "My Rooms" View (Aggregated)

```
ğŸŸ¢ LIVE NOW (rooms with people in them)
â”œâ”€â”€ The CafÃ© (11x LOVE LaB) â€” 4 people here
â”œâ”€â”€ Creative Lounge (Creativity Club) â€” 2 people here
â””â”€â”€ Coworking Space (Biz Mastermind) â€” 7 people here

ğŸŒ™ ALWAYS OPEN (24/7 rooms you can join anytime)
â”œâ”€â”€ The Sanctuary (11x LOVE LaB) â€” meditation room
â”œâ”€â”€ Night Owls (Creativity Club) â€” 24/7 hangout
â””â”€â”€ Focus Room (Biz Mastermind) â€” silent coworking

ğŸ• OPENING SOON
â”œâ”€â”€ Workshop Studio (11x LOVE LaB) â€” Opens in 2 hours
â””â”€â”€ Office Hours (Biz Mastermind) â€” Opens tomorrow 9am
```

### "My Events" View (Aggregated)

```
ğŸ“… TODAY
â”œâ”€â”€ 7:00am â€” Morning Devotional (11x LOVE LaB) â€” IN: The Sanctuary
â”œâ”€â”€ 10:00am â€” Marketing Monday (Biz Mastermind) â€” IN: Workshop Room
â””â”€â”€ 8:00pm â€” Dream Share (Creativity Club) â€” Standalone Zoom

ğŸ“… THIS WEEK
â”œâ”€â”€ Wed 9pm â€” Accountability Pod Check-in (11x LOVE LaB)
â”œâ”€â”€ Thu 2pm â€” Guest Workshop: SEO Basics (Biz Mastermind)
â””â”€â”€ Sat 10am â€” Creative Sprint (Creativity Club)

ğŸ“… UPCOMING
â”œâ”€â”€ Next Mon â€” Marketing Monday (recurring)
â””â”€â”€ Feb 5 â€” Special Masterclass with Guest Expert
```

### "My Communities" View

```
ğŸ  MY COMMUNITIES
â”œâ”€â”€ 11x LOVE LaB (Valerie) 
â”‚   â””â”€â”€ 3 Rooms | 5 upcoming events | 2 people online now
â”œâ”€â”€ Marketing Mastermind (Other Creator)
â”‚   â””â”€â”€ 2 Rooms | 3 upcoming events | 0 people online
â””â”€â”€ Creativity Club (Another Creator)
    â””â”€â”€ 4 Rooms | 8 upcoming events | 5 people online
```

### Why This Matters

- **No more switching between Circle, Mighty, Discord, etc.**
- **2am insomnia?** Check "Live Now" â€” find your people across ALL communities
- **Busy week?** See ALL events in one calendar
- **FOMO-free** â€” Never miss an event from any community

---

## ğŸ” ACCESS GATING FOR ROOMS & EVENTS

<aside>
ğŸ”’

**Paid members only.** No separate passwords â€” their Nostr login IS their access key.

</aside>

### How Gating Works

```
User clicks "Join Room" or "Join Event" â†’
App checks: Is this nPub a paid member of this Community? â†’
YES â†’ Show/reveal the meeting link â†’ User joins
NO â†’ Show paywall: "Join [Community Name] to access this room"
```

### No Separate Passwords Needed

- User logs in with Nostr ONCE
- Membership status checked automatically
- Links only visible/functional for paid members
- No "what's the Zoom password?" confusion
- Creator doesn't need to manage access lists manually

### Anti-Zoom-Bombing

- Event links hidden until event time (or 15 min before)
- Unique, time-limited access tokens for each member
- Links tied to membership â€” can't be shared externally

---

## ğŸ—‚ï¸ DATABASE SCHEMA: ROOMS & EVENTS

### Rooms Table

```sql
rooms (
  id TEXT PRIMARY KEY,
  community_id TEXT,           -- Which community owns this room
  name TEXT,                   -- "The Sanctuary"
  description TEXT,
  type TEXT,                   -- 'ambient', 'hangout', 'coworking', 'workshop'
  external_link TEXT,          -- Zoom/Jitsi/Discord URL (creator's choice)
  schedule_type TEXT,          -- '24/7' or 'scheduled'
  schedule_hours JSONB,        -- If scheduled: {"mon": "9am-5pm", ...}
  access_level TEXT,           -- 'free', 'paid'
  presence_enabled BOOLEAN,
  chat_enabled BOOLEAN,
  video_enabled BOOLEAN,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

### Room Presence Table

```sql
room_presence (
  id TEXT PRIMARY KEY,
  room_id TEXT,
  user_npub TEXT,
  joined_at TIMESTAMP,
  last_heartbeat TIMESTAMP,    -- Updated every 60 seconds while in room
  left_at TIMESTAMP            -- NULL if still present
)

-- Query: "Who's in this room now?"
SELECT * FROM room_presence 
WHERE room_id = ? AND left_at IS NULL 
AND last_heartbeat > NOW() - INTERVAL '2 minutes'
```

### Events Table

```sql
events (
  id TEXT PRIMARY KEY,
  community_id TEXT,
  room_id TEXT,                -- NULL if standalone event
  title TEXT,
  description TEXT,
  external_link TEXT,          -- Only if standalone (not in a room)
  starts_at TIMESTAMP,
  ends_at TIMESTAMP,
  recurrence_rule TEXT,        -- NULL for one-time, or RRULE string
  rsvp_enabled BOOLEAN,
  reminder_minutes INT,        -- 15, 60, 1440 (1 day), etc.
  access_level TEXT,           -- 'free', 'paid'
  created_at TIMESTAMP
)
```

### Event RSVPs Table

```sql
event_rsvps (
  id TEXT PRIMARY KEY,
  event_id TEXT,
  user_npub TEXT,
  rsvp_status TEXT,            -- 'going', 'maybe', 'not_going'
  attended BOOLEAN,            -- Confirmed attendance (for engagement points)
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

---

## ğŸ·ï¸ COMPLETE NAMING GLOSSARY

| User-Facing Term | Internal/Tech Term | Description |
| --- | --- | --- |
| **Community** | `community` | Top-level membership container |
| **Room** | `room` | Persistent gathering space within a community |
| **Event** | `event` | Calendar-based occasion |
| **Live Now** | `room.active_users > 0` | Rooms with people currently in them |
| **Always Open** | `room.schedule_type = '24/7'` | Rooms that never close |
| **Scheduled Room** | `room.schedule_type = 'scheduled'` | Rooms with specific open hours |
| **Room Event** | [`event.room](http://event.room)_id != null` | Event that happens inside a Room |
| **Standalone Event** | [`event.room](http://event.room)_id = null` | Event not tied to a Room (has own link) |
| **RSVP** | `event_rsvps` | "I'll be there" confirmation |
| **Presence** | `room_presence` | Real-time "who's here now" tracking |

---

## âœ… ROOMS & EVENTS BUILD CHECKLIST

### MVP (Build First)

- [ ]  Rooms table in database
- [ ]  Creator can add/edit/delete Rooms
- [ ]  Room types: ambient, hangout, coworking, workshop
- [ ]  External link field (accepts any URL)
- [ ]  24/7 vs scheduled hours toggle
- [ ]  Access gating (paid members only)
- [ ]  Presence tracking ("X people here now")
- [ ]  Events table in database
- [ ]  Creator can add/edit/delete Events
- [ ]  Events can link to Rooms OR be standalone
- [ ]  RSVP system
- [ ]  User dashboard: "My Rooms" aggregated view
- [ ]  User dashboard: "My Events" aggregated view
- [ ]  "Live Now" indicator across all communities

### Post-MVP (Add Later)

- [ ]  Native video embed (Jitsi/[Daily.co](http://Daily.co) option)
- [ ]  Native ambient audio player
- [ ]  Native chat within rooms
- [ ]  Recording archive
- [ ]  Calendar sync (Google Calendar, Apple Calendar)
- [ ]  Push notifications for event reminders
- [ ]  "Raise hand" feature for workshops
- [ ]  Breakout rooms support

---

<aside>
ğŸ”¥

**Ready to build!** This spec gives Replit everything it needs to create the MVP. Content is Value for Value. Community is paid. Users own their data. Lightning flows directly to creators. Rooms and Events bring people together. Let's go! ğŸ’œ

</aside>